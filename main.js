!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[a]={exports:{}};e[a][0].call(h.exports,(function(t){return i(e[a][1][t]||t)}),h,h.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=t("./generateID.js");t("./Widgetable.js"),t("./widgets/Widgets.js"),L.ALS.Layer=L.ALS.Widgetable.extend({defaultName:"Advanced Layer",isShown:!0,isSelected:!1,initialize:function(t,e){L.ALS.Widgetable.prototype.initialize.call(this,"layer-menu"),this._eventsForObjects={},this._mapEvents=[],this.map=t,this.id="SynthLayer"+o(),this.layers=L.featureGroup(),this._layerSystem=e,this.name=this.defaultName},addEventListenerTo:function(t,e,r){var n=this;void 0===t._advSysID&&(t._advSysID="advLayerSys"+o()),void 0===this._eventsForObjects[t._advSysID]&&(this._eventsForObjects[t._advSysID]={}),void 0===this._eventsForObjects[t._advSysID][e]&&(this._eventsForObjects[t._advSysID][e]=[]);var i=function(e){var i=function(t){n[r](t),n._layerSystem._reorderLayers()};t!==n.map?n.isShown&&(n.isSelected?i(e):n._layerSystem._passEvent(e)):i(e)},a={type:e,handler:r,handlerFunction:i};this._eventsForObjects[t._advSysID][e].push(a),t.on(e,i),t===this.map&&this._mapEvents.push(a)},removeEventListenerFrom:function(t,e,r){if(void 0!==t._advSysID){var n=this._eventsForObjects[t._advSysID][e];if(void 0!==n){for(var i=-1,o=0;o<n.length;o++)if(n[o].handler===r){i=o;break}if(-1!==i){var a=n[i];t===this.map&&this._mapEvents.splice(this._mapEvents.indexOf(a),1),t.off(e,a.handlerFunction),this._eventsForObjects[t._advSysID][e].splice(i,1)}}}},_removeAllMapEventListeners:function(){var t,e=n(this._mapEvents);try{for(e.s();!(t=e.n()).done;){var r=t.value;this.map.off(r.type,r.handlerFunction)}}catch(t){e.e(t)}finally{e.f()}},onShow:function(){this.layers.addTo(this.map),this.isShown=!0},onHide:function(){this.layers.remove(),this.isShown=!1},onSelect:function(){},onDeselect:function(){},onNameChange:function(){},addLayers:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];this.layers.addLayer(o)}this.isShown&&this.onShow(),this._layerSystem._reorderLayers()},removeLayers:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=0,o=e;i<o.length;i++){var a=o[i];if(void 0!==a.getLayers){var s,l=n(a.getLayers());try{for(l.s();!(s=l.n()).done;){var u=s.value;this.removeLayers(u)}}catch(t){l.e(t)}finally{l.f()}}void 0!==a._advSysID&&(delete this._eventsForObjects[a._advSysID],a.clearAllEventListeners()),this.layers.removeLayer(a),a.remove()}},init:function(t){var e=new L.ALS.WidgetLayer;this.addLayers(e.getLayer()),e.addWidget(new L.ALS.Widgets.Number("idk","Test",this,"testCallback")),e.addWidget(new L.ALS.Widgets.Color("idk2","Test2",this,"testCallback")),e.addWidget(new L.ALS.Widgets.SimpleLabel("label","Label haha"))},testCallback:function(t){console.log("New value is: "+t.getValue())},statics:{wizard:new L.ALS.Wizard},setStyle:function(t){return this.layers.setStyle(t),this},getBounds:function(){return this.layers.getBounds()},eachLayer:function(t,e){return this.layers.eachLayer(t,e),this},toGeoJSON:function(){return this.layers.toGeoJSON()}})},{"./Widgetable.js":4,"./generateID.js":6,"./widgets/Widgets.js":16}],4:[function(t,e,r){"use strict";L.ALS.Widgetable=L.Class.extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.container=document.createElement("div"),""!==t&&(this.container.className=t),this._widgets={}},addWidget:function(t){this.container.appendChild(t.container),this._widgets[t.id]=t},removeWidget:function(t){var e=this._widgets[t].getContainer();e.parentNode.removeChild(e),delete this._widgets[t]},removeAllWidgets:function(){for(;this.container.hasChildNodes();)this.container.removeChild(this.container.firstChild);this._widgets={}},getControlById:function(t){return this._widgets[t]}})},{}],6:[function(t,e,r){"use strict";e.exports=function(){return"_"+Math.random()+"_"+Date.now()}},{}],16:[function(t,e,r){"use strict";L.ALS.Widgets={},t("./BaseWidget.js"),t("./Time.js"),t("./DropDownList.js"),t("./SimpleLabel.js"),t("./ValueLabel.js"),t("./TextArea.js"),t("./Number.js"),t("./Checkbox.js");for(var n=function(){var t=o[i];L.ALS.Widgets[t]=L.ALS.Widgets.BaseWidget.extend({initialize:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};L.ALS.Widgets.BaseWidget.prototype.initialize.call(this,t,e,r,n,i,["edit","change"],o)}})},i=0,o=["Text","Email","Password","Color"];i<o.length;i++)n()},{"./BaseWidget.js":8,"./Checkbox.js":9,"./DropDownList.js":10,"./Number.js":11,"./SimpleLabel.js":12,"./TextArea.js":13,"./Time.js":14,"./ValueLabel.js":15}],2:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}L.ALS={dispatchEvent:function(t,e){var r;"function"==typeof Event?r=new Event(e):(r=document.createEvent("Event")).initEvent(e,!0,!0),t.dispatchEvent(r)},formatNumber:function(t){for(var e=t.toString(),r="",n="",i=0,o=e.length-1;o>=0;o--){var a=e[o];"."!==a?(3===i&&(r=" "+r,i=0),r=a+r,n=a+n,i++):(r="."+n,i=0)}return r}};var o=t("sortablejs"),a=t("jszip");t("./Widgetable.js"),t("./WidgetLayer.js"),t("./Wizard.js"),t("./Layer.js"),L.ALS.System=L.Control.extend({initialize:function(e){var r=this;this._baseLayers={},this._layerTypes={},this._layers={},this._selectedLayer=void 0,this.map=e,t("./markup.js")(),this._wizardContainer=document.getElementById("wizard-container"),this._wizardContent=document.getElementById("wizard-content"),this._wizardMenu=document.getElementById("wizard-menu"),this._layerContainer=document.getElementById("menu-items"),this._wizardMenu.addEventListener("change",(function(t){r._displayWizardControls(t)})),document.getElementById("wizard-cancel-button").addEventListener("click",(function(){r._closeWizard()})),document.getElementById("wizard-add-button").addEventListener("click",(function(){r._createLayer()})),this._baseLayerMenu=document.getElementById("menu-maps-select"),this._baseLayerMenu.addEventListener("change",(function(t){r._onBaseLayerChange(t)})),this._saveButton=document.getElementById("adv-lyr-sys-save-button"),this._saveButton.addEventListener("click",(function(){r._saveProject()})),this._loadButton=document.getElementById("adv-lyr-sys-load-button"),this._loadButton.addEventListener("click",(function(){r._loadProject()})),this._exportButton=document.getElementById("adv-lyr-sys-export-button"),this._exportButton.addEventListener("click",(function(){r._exportProject()})),this._settingsButton=document.getElementById("adv-lyr-sys-settings-button"),this._settingsButton.addEventListener("click",(function(){r._openSettings()})),document.getElementById("menu-add").addEventListener("click",(function(){r._showWizard()})),document.getElementById("menu-delete").addEventListener("click",(function(){r._deleteLayer()}));var n={handle:".layer-handle",animation:250,onEnd:function(){r._reorderLayers()}};void 0!==o.Sortable?o.Sortable.create(this._layerContainer,n):new o(this._layerContainer,n)},_onBaseLayerChange:function(t){this.map.removeLayer(this._previousBaseLayer),this._previousBaseLayer=this._baseLayers[t.target.value],this._previousBaseLayer.addTo(this.map)},addBaseLayer:function(t,e){var r=document.createElement("option");r.text=e,this._baseLayers[e]=t,this._baseLayerMenu.appendChild(r),void 0===this._previousBaseLayer&&(this._previousBaseLayer=t,this._previousBaseLayer.addTo(this.map))},addLayerType:function(t){var e=t.wizard.displayName,r=document.createElement("option");r.text=e,this._wizardMenu.appendChild(r);var n=t.wizard.container;this._wizardContent.appendChild(n),this._layerTypes[e]={layerType:t,container:n},L.ALS.dispatchEvent(this._wizardMenu,"change")},_showWizard:function(){this._wizardContainer.setAttribute("data-hidden","0")},_closeWizard:function(){this._wizardContainer.setAttribute("data-hidden","1")},_displayWizardControls:function(t){var e,r=n(this._wizardContent.children);try{for(r.s();!(e=r.n()).done;)e.value.setAttribute("data-hidden","1")}catch(t){r.e(t)}finally{r.f()}this._layerTypes[t.target.value].container.setAttribute("data-hidden","0")},_createLayer:function(){var t=this,e=this._layerTypes[this._wizardMenu.value].layerType,r={};for(var n in e.wizard._widgets)if(e.wizard._widgets.hasOwnProperty(n)){var i=e.wizard._widgets[n];r[i.id]=i.getValue()}var o=new e(this.map,this);this._layers[o.id]=o;var a=document.createElement("i");a.className="layer-handle fas fa-arrows-alt";var s=document.createElement("p");s.className="layer-label",s.innerText=o.defaultName,s.addEventListener("dblclick",(function(){this.contentEditable="true",this.focus()})),s.addEventListener("blur",(function(t){var e=t.target;e.contentEditable="false",o.name=e.innerText,o.onNameChange()})),s.addEventListener("keydown",(function(t){"Enter"===t.key&&(t.preventDefault(),this.blur())}));var l=document.createElement("i");l.className="fas fa-cog";var u=o.container;this._makeHideable(l,u),u.setAttribute("data-hidden","1");var h=document.createElement("i");h.className="fas fa-eye",this._makeHideable(h,void 0,(function(){h.className="fas fa-eye-slash",o.onHide()}),(function(){h.className="fas fa-eye",o.onShow()}));var c=document.createElement("div");c.className="layer-container",c.id=o.id;for(var f=0,d=[a,s,l,h,u];f<d.length;f++){var p=d[f];c.appendChild(p)}c.addEventListener("click",(function(){t._selectLayer(o.id)})),this._layerContainer.appendChild(c),this._selectLayer(o.id),this._closeWizard(),o.init(r)},_selectLayer:function(t){if(void 0!==this._selectedLayer){if(this._selectedLayer.id===t)return;this._selectedLayer.onDeselect()}for(var e in this._layers)this._layers[e].isSelected=!1;this._layers[t].isSelected=!0,this._selectedLayer=this._layers[t],this._selectedLayer.onSelect();var r,i=n(this._layerContainer.childNodes);try{for(i.s();!(r=i.n()).done;)r.value.setAttribute("data-is-selected","0")}catch(t){i.e(t)}finally{i.f()}document.getElementById(t).setAttribute("data-is-selected","1")},_deleteLayer:function(){if(void 0!==this._selectedLayer&&window.confirm("Are you sure you want to delete this layer?")){var t=document.getElementById(this._selectedLayer.id);for(var e in t.parentElement.removeChild(t),this._selectedLayer.layers.remove(),this._selectedLayer._removeAllMapEventListeners(),this._selectedLayer)delete this._selectedLayer[e];delete this._layers[this._selectedLayer.id];var r=this._layerContainer.firstElementChild;null!==r?this._selectLayer(r.id):this._selectedLayer=void 0}},_reorderLayers:function(){for(var t=this._layerContainer.childNodes,e=0;e<=t.length;e++){var r=t[e];void 0!==r&&this._layers[r.id].layers.bringToBack()}},_passEvent:function(t){this._selectedLayer.layers.bringToFront();var e=t.originalEvent,r=new e.constructor(e.type,e);e.target.dispatchEvent(r),this._reorderLayers()},_exportProject:function(){var t={},e=new a;for(var r in this._layers)if(this._layers.hasOwnProperty(r)){var n=this._layers[r],i="";t.hasOwnProperty(n.name)?(i=" ("+t[n.name]+")",t[n.name]++):t[n.name]=1,e.file(n.name+i+".geojson",JSON.stringify(n.toGeoJSON()))}e.generateAsync({type:"blob"}).then((function(t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(t,"SynthFlightProject.zip");else{var e=document.createElement("a");e.download="SynthFlightProject.zip",e.href=window.URL.createObjectURL(t),e.click()}})).catch()},_loadProject:function(){window.alert("Sorry, projects loading is not implemented yet")},_openSettings:function(){window.alert("Sorry, settings are not implemented yet")},_saveProject:function(){window.alert("Sorry, projects saving is not implemented yet");var t,e=n(this._selectedLayer.layers.getLayers());try{for(e.s();!(t=e.n()).done;)t.value}catch(t){e.e(t)}finally{e.f()}},_makeHideable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=void 0!==e;t.setAttribute("data-hidden","0"),i&&e.setAttribute("data-hidden","1"),t.setAttribute("data-hidden","1"),t.addEventListener("click",(function(){var o,a;"1"===t.getAttribute("data-hidden")?(o="0",a=r):(o="1",a=n),t.setAttribute("data-hidden",o),i&&e.setAttribute("data-hidden",o),void 0!==a&&a()}))}})},{"./Layer.js":1,"./WidgetLayer.js":3,"./Widgetable.js":4,"./Wizard.js":5,"./markup.js":7,jszip:50,sortablejs:100}],5:[function(t,e,r){"use strict";L.ALS.Wizard=L.ALS.Widgetable.extend({displayName:"Layer",initialize:function(){L.ALS.Widgetable.prototype.initialize.call(this)}})},{}],7:[function(t,e,r){"use strict";e.exports=function(){for(var t=(new DOMParser).parseFromString('\n\n<body>\n\t<div id="menu">\n\t\t\x3c!-- Top panel --\x3e\n\t\t<div id="menu-buttons" class="controls-row-set">\n\t\t\t<label for="menu-button-checkbox" id="menu-close" class="button-base icon-button fas fa-times"></label>\n\t\t\t<select id="menu-maps-select"></select>\n\t\t\t<i id="menu-add" class="icon-button fas fa-plus"></i>\n\t\t\t<i id="menu-delete" class="icon-button fas fa-trash"></i>\n\t\t</div>\n\t\t\n\t\t\x3c!-- Content container --\x3e\n\t\t<div id="menu-items"></div>\n\t\t\n\t\t\x3c!-- Bottom panel --\x3e\n\t\t<div id="adv-lyr-sys-menu-bottom-panel" class="controls-row-set">\n\t\t\t<input type="button" id="adv-lyr-sys-save-button" value="Save" />\n\t\t\t<input type="button" id="adv-lyr-sys-load-button" value="Load" />\n\t\t\t<input type="button" id="adv-lyr-sys-export-button" value="Export">\n\t\t\t<input type="button" id="adv-lyr-sys-settings-button" value="Settings">\n\t\t</div>\n\t</div>\n\t\n\t\x3c!-- Wizard that lets users add new layers --\x3e\n\t<div id="wizard-container" data-hidden="1">\n\t\t<div id="wizard-window">\n\t\t\t<select id="wizard-menu"></select>\n\t\t\t<div id="wizard-content"></div>\n\t\t\t<div id="wizard-buttons" class="controls-row-set">\n\t\t\t\t<input type="button" id="wizard-cancel-button" value="Cancel" />\n\t\t\t\t<input type="button" id="wizard-add-button" value="Add">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</body>\n\n',"text/html");t.body.hasChildNodes();)document.body.appendChild(t.body.firstChild)}},{}],3:[function(t,e,r){"use strict";L.ALS.WidgetLayer=L.ALS.Widgetable.extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[52,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";L.ALS.Widgetable.prototype.initialize.call(this,"adv-lyr-sys-divicon");var r=L.divIcon({iconSize:null,className:"adv-lyr-sys-divicon-container",html:this.container});this.marker=L.marker(t,{icon:r}),this.setOrigin(e)},setLatLng:function(t){this.marker.setLatLng(t)},getLatLng:function(){return this.marker.getLatLng()},getLayer:function(){return this.marker},setOrigin:function(t){for(var e=0,r=["topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","leftCenter","rightCenter","center"];e<r.length;e++){var n=r[e];this.container.classList.remove("adv-lyr-sys-divicon-pos-"+n)}this.container.classList.add("adv-lyr-sys-divicon-pos-"+t)}})},{}],100:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,i){"object"===(void 0===r?"undefined":n(r))&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).Sortable=i()}(void 0,(function(){function t(e){return(t="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(e)}function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function i(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(r){e(t,r,n[r])}))}return t}function o(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var l=s(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=s(/Edge/i),h=s(/firefox/i),c=s(/safari/i)&&!s(/chrome/i)&&!s(/android/i),f=s(/iP(ad|od|hone)/i),d=s(/chrome/i)&&s(/android/i),p={capture:!1,passive:!1};function g(t,e,r){t.addEventListener(e,r,!l&&p)}function m(t,e,r){t.removeEventListener(e,r,!l&&p)}function v(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function y(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function b(t,e,r,n){if(t){r=r||document;do{if(null!=e&&(">"===e[0]?t.parentNode===r&&v(t,e):v(t,e))||n&&t===r)return t;if(t===r)break}while(t=y(t))}return null}var _,w=/\s+/g;function S(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(w," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(w," ")}}function E(t,e,r){var n=t&&t.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),void 0===e?r:r[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=r+("string"==typeof r?"":"px")}}function L(t,e){var r="";if("string"==typeof t)r=t;else do{var n=E(t,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(r)}function k(t,e,r){if(t){var n=t.getElementsByTagName(e),i=0,o=n.length;if(r)for(;i<o;i++)r(n[i],i);return n}return[]}function x(){return document.scrollingElement||document.documentElement}function A(t,e,r,n,i){if(t.getBoundingClientRect||t===window){var o,a,s,u,h,c,f;if(t!==window&&t!==x()?(a=(o=t.getBoundingClientRect()).top,s=o.left,u=o.bottom,h=o.right,c=o.height,f=o.width):(a=0,s=0,u=window.innerHeight,h=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||r)&&t!==window&&(i=i||t.parentNode,!l))do{if(i&&i.getBoundingClientRect&&("none"!==E(i,"transform")||r&&"static"!==E(i,"position"))){var d=i.getBoundingClientRect();a-=d.top+parseInt(E(i,"border-top-width")),s-=d.left+parseInt(E(i,"border-left-width")),u=a+o.height,h=s+o.width;break}}while(i=i.parentNode);if(n&&t!==window){var p=L(i||t),g=p&&p.a,m=p&&p.d;p&&(u=(a/=m)+(c/=m),h=(s/=g)+(f/=g))}return{top:a,left:s,bottom:u,right:h,width:f,height:c}}}function C(t,e,r){for(var n=D(t,!0),i=A(t)[e];n;){var o=A(n)[r];if(!("top"===r||"left"===r?i>=o:i<=o))return n;if(n===x())break;n=D(n,!1)}return!1}function T(t,e,r){for(var n=0,i=0,o=t.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==zt.ghost&&o[i]!==zt.dragged&&b(o[i],r.draggable,t,!1)){if(n===e)return o[i];n++}i++}return null}function O(t,e){for(var r=t.lastElementChild;r&&(r===zt.ghost||"none"===E(r,"display")||e&&!v(r,e));)r=r.previousElementSibling;return r||null}function I(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===zt.clone||e&&!v(t,e)||r++;return r}function R(t){var e=0,r=0,n=x();if(t)do{var i=L(t),o=i.a,a=i.d;e+=t.scrollLeft*o,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function D(t,e){if(!t||!t.getBoundingClientRect)return x();var r=t,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var i=E(r);if(r.clientWidth<r.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!r.getBoundingClientRect||r===document.body)return x();if(n||e)return r;n=!0}}}while(r=r.parentNode);return x()}function B(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function P(t,e){return function(){if(!_){var r=arguments;1===r.length?t.call(this,r[0]):t.apply(this,r),_=setTimeout((function(){_=void 0}),e)}}}function M(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function N(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function z(t,e){E(t,"position","absolute"),E(t,"top",e.top),E(t,"left",e.left),E(t,"width",e.width),E(t,"height",e.height)}function j(t){E(t,"position",""),E(t,"top",""),E(t,"left",""),E(t,"width",""),E(t,"height","")}var W="Sortable"+(new Date).getTime();function F(){var t,e=[];return{captureAnimationState:function(){e=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==E(t,"display")&&t!==zt.ghost){e.push({target:t,rect:A(t)});var r=i({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=L(t,!0);n&&(r.top-=n.f,r.left-=n.e)}t.fromRect=r}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var r in t)if(t.hasOwnProperty(r))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r);return-1}(e,{target:t}),1)},animateAll:function(r){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof r&&r());var i=!1,o=0;e.forEach((function(t){var e=0,r=t.target,a=r.fromRect,s=A(r),l=r.prevFromRect,u=r.prevToRect,h=t.rect,c=L(r,!0);c&&(s.top-=c.f,s.left-=c.e),r.toRect=s,r.thisAnimationDuration&&B(l,s)&&!B(a,s)&&(h.top-s.top)/(h.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(e=function(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}(h,l,u,n.options)),B(s,a)||(r.prevFromRect=a,r.prevToRect=s,e||(e=n.options.animation),n.animate(r,h,s,e)),e&&(i=!0,o=Math.max(o,e),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),e),r.thisAnimationDuration=e)})),clearTimeout(t),i?t=setTimeout((function(){"function"==typeof r&&r()}),o):"function"==typeof r&&r(),e=[]},animate:function(t,e,r,n){if(n){E(t,"transition",""),E(t,"transform","");var i=L(this.el),o=i&&i.a,a=i&&i.d,s=(e.left-r.left)/(o||1),l=(e.top-r.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,E(t,"transform","translate3d("+s+"px,"+l+"px,0)"),function(t){t.offsetWidth}(t),E(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),E(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){E(t,"transition",""),E(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}var U=[],V={initializeByDefault:!0},G={mount:function(t){for(var e in V)!V.hasOwnProperty(e)||e in t||(t[e]=V[e]);U.push(t)},pluginEvent:function(t,e,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=t+"Global";U.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][o]&&e[n.pluginName][o](i({sortable:e},r)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](i({sortable:e},r)))}))},initializePlugins:function(t,e,n,i){for(var o in U.forEach((function(i){var o=i.pluginName;if(t.options[o]||i.initializeByDefault){var a=new i(t,e,t.options);a.sortable=t,a.options=t.options,t[o]=a,r(n,a.defaults)}})),t.options)if(t.options.hasOwnProperty(o)){var a=this.modifyOption(t,o,t.options[o]);void 0!==a&&(t.options[o]=a)}},getEventProperties:function(t,e){var n={};return U.forEach((function(i){"function"==typeof i.eventProperties&&r(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,r){var n;return U.forEach((function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(n=i.optionListeners[e].call(t[i.pluginName],r))})),n}};function H(t){var e=t.sortable,r=t.rootEl,n=t.name,o=t.targetEl,a=t.cloneEl,s=t.toEl,h=t.fromEl,c=t.oldIndex,f=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,g=t.originalEvent,m=t.putSortable,v=t.extraEventProperties;if(e=e||r&&r[W]){var y,b=e.options,_="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||l||u?(y=document.createEvent("Event")).initEvent(n,!0,!0):y=new CustomEvent(n,{bubbles:!0,cancelable:!0}),y.to=s||r,y.from=h||r,y.item=o||r,y.clone=a,y.oldIndex=c,y.newIndex=f,y.oldDraggableIndex=d,y.newDraggableIndex=p,y.originalEvent=g,y.pullMode=m?m.lastPutMode:void 0;var w=i({},v,G.getEventProperties(n,e));for(var S in w)y[S]=w[S];r&&r.dispatchEvent(y),b[_]&&b[_].call(e,y)}}var q=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,a=o(r,["evt"]);G.pluginEvent.bind(zt)(t,e,i({dragEl:Y,parentEl:X,ghostEl:K,rootEl:J,nextEl:$,lastDownEl:Q,cloneEl:tt,cloneHidden:et,dragStarted:pt,putSortable:st,activeSortable:zt.active,originalEvent:n,oldIndex:rt,oldDraggableIndex:it,newIndex:nt,newDraggableIndex:ot,hideGhostForTarget:Bt,unhideGhostForTarget:Pt,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(t){Z({sortable:e,name:t,originalEvent:n})}},a))};function Z(t){H(i({putSortable:st,cloneEl:tt,targetEl:Y,rootEl:J,oldIndex:rt,oldDraggableIndex:it,newIndex:nt,newDraggableIndex:ot},t))}var Y,X,K,J,$,Q,tt,et,rt,nt,it,ot,at,st,lt,ut,ht,ct,ft,dt,pt,gt,mt,vt,yt,bt=!1,_t=!1,wt=[],St=!1,Et=!1,Lt=[],kt=!1,xt=[],At="undefined"!=typeof document,Ct=f,Tt=u||l?"cssFloat":"float",Ot=At&&!d&&!f&&"draggable"in document.createElement("div"),It=function(){if(At){if(l)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Rt=function(t,e){var r=E(t),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=T(t,0,e),o=T(t,1,e),a=i&&E(i),s=o&&E(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+A(i).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(o).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var h="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==h?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===r[Tt]||o&&"none"===r[Tt]&&l+u>n)?"vertical":"horizontal"},Dt=function(e){function r(t,e){return function(n,i,o,a){var s=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==t&&(e||s))return!0;if(null==t||!1===t)return!1;if(e&&"clone"===t)return t;if("function"==typeof t)return r(t(n,i,o,a),e)(n,i,o,a);var l=(e?n:i).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=e.group;i&&"object"==t(i)||(i={name:i}),n.name=i.name,n.checkPull=r(i.pull,!0),n.checkPut=r(i.put),n.revertClone=i.revertClone,e.group=n},Bt=function(){!It&&K&&E(K,"display","none")},Pt=function(){!It&&K&&E(K,"display","")};At&&document.addEventListener("click",(function(t){if(_t)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),_t=!1,!1}),!0);var Mt=function(t){if(Y){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,o=t.clientY,wt.some((function(t){if(!O(t)){var e=A(t),r=t[W].options.emptyInsertThreshold,n=i>=e.left-r&&i<=e.right+r,s=o>=e.top-r&&o<=e.bottom+r;return r&&n&&s?a=t:void 0}})),a);if(e){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);r.target=r.rootEl=e,r.preventDefault=void 0,r.stopPropagation=void 0,e[W]._onDragOver(r)}}var i,o,a},Nt=function(t){Y&&Y.parentNode[W]._isOutsideThisEl(t.target)};function zt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=r({},e),t[W]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==zt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in G.initializePlugins(this,t,n),n)!(i in e)&&(e[i]=n[i]);for(var o in Dt(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&Ot,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?g(t,"pointerdown",this._onTapStart):(g(t,"mousedown",this._onTapStart),g(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(g(t,"dragover",this),g(t,"dragenter",this)),wt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),r(this,F())}function jt(t,e,r,n,i,o,a,s){var h,c,f=t[W],d=f.options.onMove;return!window.CustomEvent||l||u?(h=document.createEvent("Event")).initEvent("move",!0,!0):h=new CustomEvent("move",{bubbles:!0,cancelable:!0}),h.to=e,h.from=t,h.dragged=r,h.draggedRect=n,h.related=i||e,h.relatedRect=o||A(e),h.willInsertAfter=s,h.originalEvent=a,t.dispatchEvent(h),d&&(c=d.call(f,h,a)),c}function Wt(t){t.draggable=!1}function Ft(){kt=!1}function Ut(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function Vt(t){return setTimeout(t,0)}function Gt(t){return clearTimeout(t)}zt.prototype={constructor:zt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(gt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Y):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,r=this.el,n=this.options,i=n.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=n.filter;if(function(t){xt.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&xt.push(n)}}(r),!Y&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||n.disabled||l.isContentEditable||(s=b(s,n.draggable,r,!1))&&s.animated||Q===s)){if(rt=I(s),it=I(s,n.draggable),"function"==typeof u){if(u.call(this,t,s,this))return Z({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:r,fromEl:r}),q("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some((function(n){if(n=b(l,n.trim(),r,!1))return Z({sortable:e,rootEl:n,name:"filter",targetEl:s,fromEl:r,toEl:r}),q("filter",e,{evt:t}),!0}))))return void(i&&t.cancelable&&t.preventDefault());n.handle&&!b(l,n.handle,r,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,r){var n,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(r&&!Y&&r.parentNode===o){var c=A(r);if(J=o,X=(Y=r).parentNode,$=Y.nextSibling,Q=r,at=a.group,zt.dragged=Y,lt={target:Y,clientX:(e||t).clientX,clientY:(e||t).clientY},ft=lt.clientX-c.left,dt=lt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Y.style["will-change"]="all",n=function(){q("delayEnded",i,{evt:t}),zt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!h&&i.nativeDraggable&&(Y.draggable=!0),i._triggerDragStart(t,e),Z({sortable:i,name:"choose",originalEvent:t}),S(Y,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){k(Y,t.trim(),Wt)})),g(s,"dragover",Mt),g(s,"mousemove",Mt),g(s,"touchmove",Mt),g(s,"mouseup",i._onDrop),g(s,"touchend",i._onDrop),g(s,"touchcancel",i._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Y.draggable=!0),q("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(u||l))n();else{if(zt.eventCanceled)return void this._onDrop();g(s,"mouseup",i._disableDelayedDrag),g(s,"touchend",i._disableDelayedDrag),g(s,"touchcancel",i._disableDelayedDrag),g(s,"mousemove",i._delayedDragTouchMoveHandler),g(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&g(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Y&&Wt(Y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;m(t,"mouseup",this._disableDelayedDrag),m(t,"touchend",this._disableDelayedDrag),m(t,"touchcancel",this._disableDelayedDrag),m(t,"mousemove",this._delayedDragTouchMoveHandler),m(t,"touchmove",this._delayedDragTouchMoveHandler),m(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):g(document,e?"touchmove":"mousemove",this._onTouchMove):(g(Y,"dragend",this),g(J,"dragstart",this._onDragStart));try{document.selection?Vt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(bt=!1,J&&Y){q("dragStarted",this,{evt:e}),this.nativeDraggable&&g(document,"dragover",Nt);var r=this.options;!t&&S(Y,r.dragClass,!1),S(Y,r.ghostClass,!0),zt.active=this,t&&this._appendGhost(),Z({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(ut){this._lastX=ut.clientX,this._lastY=ut.clientY,Bt();for(var t=document.elementFromPoint(ut.clientX,ut.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ut.clientX,ut.clientY))!==e;)e=t;if(Y.parentNode[W]._isOutsideThisEl(t),e)do{if(e[W]&&e[W]._onDragOver({clientX:ut.clientX,clientY:ut.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Pt()}},_onTouchMove:function(t){if(lt){var e=this.options,r=e.fallbackTolerance,n=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=K&&L(K,!0),a=K&&o&&o.a,s=K&&o&&o.d,l=Ct&&yt&&R(yt),u=(i.clientX-lt.clientX+n.x)/(a||1)+(l?l[0]-Lt[0]:0)/(a||1),h=(i.clientY-lt.clientY+n.y)/(s||1)+(l?l[1]-Lt[1]:0)/(s||1);if(!zt.active&&!bt){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(K){o?(o.e+=u-(ht||0),o.f+=h-(ct||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var c="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");E(K,"webkitTransform",c),E(K,"mozTransform",c),E(K,"msTransform",c),E(K,"transform",c),ht=u,ct=h,ut=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!K){var t=this.options.fallbackOnBody?document.body:J,e=A(Y,!0,Ct,!0,t),r=this.options;if(Ct){for(yt=t;"static"===E(yt,"position")&&"none"===E(yt,"transform")&&yt!==document;)yt=yt.parentNode;yt!==document.body&&yt!==document.documentElement?(yt===document&&(yt=x()),e.top+=yt.scrollTop,e.left+=yt.scrollLeft):yt=x(),Lt=R(yt)}S(K=Y.cloneNode(!0),r.ghostClass,!1),S(K,r.fallbackClass,!0),S(K,r.dragClass,!0),E(K,"transition",""),E(K,"transform",""),E(K,"box-sizing","border-box"),E(K,"margin",0),E(K,"top",e.top),E(K,"left",e.left),E(K,"width",e.width),E(K,"height",e.height),E(K,"opacity","0.8"),E(K,"position",Ct?"absolute":"fixed"),E(K,"zIndex","100000"),E(K,"pointerEvents","none"),zt.ghost=K,t.appendChild(K),E(K,"transform-origin",ft/parseInt(K.style.width)*100+"% "+dt/parseInt(K.style.height)*100+"%")}},_onDragStart:function(t,e){var r=this,n=t.dataTransfer,i=r.options;q("dragStart",this,{evt:t}),zt.eventCanceled?this._onDrop():(q("setupClone",this),zt.eventCanceled||((tt=N(Y)).draggable=!1,tt.style["will-change"]="",this._hideClone(),S(tt,this.options.chosenClass,!1),zt.clone=tt),r.cloneId=Vt((function(){q("clone",r),zt.eventCanceled||(r.options.removeCloneOnHide||J.insertBefore(tt,Y),r._hideClone(),Z({sortable:r,name:"clone"}))})),!e&&S(Y,i.dragClass,!0),e?(_t=!0,r._loopId=setInterval(r._emulateDragOver,50)):(m(document,"mouseup",r._onDrop),m(document,"touchend",r._onDrop),m(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",i.setData&&i.setData.call(r,n,Y)),g(document,"drop",r),E(Y,"transform","translateZ(0)")),bt=!0,r._dragStartId=Vt(r._dragStarted.bind(r,e,t)),g(document,"selectstart",r),pt=!0,c&&E(document.body,"user-select","none"))},_onDragOver:function(t){var e,r,n,o,a=this.el,s=t.target,l=this.options,u=l.group,h=zt.active,c=at===u,f=l.sort,d=st||h,p=this,g=!1;if(!kt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=b(s,l.draggable,a,!0),N("dragOver"),zt.eventCanceled)return g;if(Y.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return j(!1);if(_t=!1,h&&!l.disabled&&(c?f||(n=!J.contains(Y)):st===this||(this.lastPutMode=at.checkPull(this,h,Y,t))&&u.checkPut(this,h,Y,t))){if(o="vertical"===this._getDirection(t,s),e=A(Y),N("dragOverValid"),zt.eventCanceled)return g;if(n)return X=J,z(),this._hideClone(),N("revert"),zt.eventCanceled||($?J.insertBefore(Y,$):J.appendChild(Y)),j(!0);var m=O(a,l.draggable);if(!m||function(t,e,r){var n=A(O(r.el,r.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(t,o,this)&&!m.animated){if(m===Y)return j(!1);if(m&&a===t.target&&(s=m),s&&(r=A(s)),!1!==jt(J,a,Y,e,s,r,t,!!s))return z(),a.appendChild(Y),X=a,F(),j(!0)}else if(s.parentNode===a){r=A(s);var v,y,_,w=Y.parentNode!==a,L=!function(t,e,r){var n=r?t.left:t.top,i=r?t.right:t.bottom,o=r?t.width:t.height,a=r?e.left:e.top,s=r?e.right:e.bottom,l=r?e.width:e.height;return n===a||i===s||n+o/2===a+l/2}(Y.animated&&Y.toRect||e,s.animated&&s.toRect||r,o),k=o?"top":"left",x=C(s,"top","top")||C(Y,"top","top"),T=x?x.scrollTop:void 0;if(gt!==s&&(y=r[k],St=!1,Et=!L&&l.invertSwap||w),0!==(v=function(t,e,r,n,i,o,a,s){var l=n?t.clientY:t.clientX,u=n?r.height:r.width,h=n?r.top:r.left,c=n?r.bottom:r.right,f=!1;if(!a)if(s&&vt<u*i){if(!St&&(1===mt?l>h+u*o/2:l<c-u*o/2)&&(St=!0),St)f=!0;else if(1===mt?l<h+vt:l>c-vt)return-mt}else if(l>h+u*(1-i)/2&&l<c-u*(1-i)/2)return function(t){return I(Y)<I(t)?1:-1}(e);return(f=f||a)&&(l<h+u*o/2||l>c-u*o/2)?l>h+u/2?1:-1:0}(t,s,r,o,L?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Et,gt===s))){var R=I(Y);do{R-=v,_=X.children[R]}while(_&&("none"===E(_,"display")||_===K))}if(0===v||_===s)return j(!1);gt=s,mt=v;var D=s.nextElementSibling,B=!1,P=jt(J,a,Y,e,s,r,t,B=1===v);if(!1!==P)return 1!==P&&-1!==P||(B=1===P),kt=!0,setTimeout(Ft,30),z(),B&&!D?a.appendChild(Y):s.parentNode.insertBefore(Y,B?D:s),x&&M(x,0,T-x.scrollTop),X=Y.parentNode,void 0===y||Et||(vt=Math.abs(y-A(s)[k])),F(),j(!0)}if(a.contains(Y))return j(!1)}return!1}function N(l,u){q(l,p,i({evt:t,isOwner:c,axis:o?"vertical":"horizontal",revert:n,dragRect:e,targetRect:r,canSort:f,fromSortable:d,target:s,completed:j,onMove:function(r,n){return jt(J,a,Y,e,r,A(r),t,n)},changed:F},u))}function z(){N("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function j(e){return N("dragOverCompleted",{insertion:e}),e&&(c?h._hideClone():h._showClone(p),p!==d&&(S(Y,st?st.options.ghostClass:h.options.ghostClass,!1),S(Y,l.ghostClass,!0)),st!==p&&p!==zt.active?st=p:p===zt.active&&st&&(st=null),d===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){N("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(s===Y&&!Y.animated||s===a&&!s.animated)&&(gt=null),l.dragoverBubble||t.rootEl||s===document||(Y.parentNode[W]._isOutsideThisEl(t.target),!e&&Mt(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function F(){nt=I(Y),ot=I(Y,l.draggable),Z({sortable:p,name:"change",toEl:a,newIndex:nt,newDraggableIndex:ot,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove),m(document,"touchmove",this._onTouchMove),m(document,"pointermove",this._onTouchMove),m(document,"dragover",Mt),m(document,"mousemove",Mt),m(document,"touchmove",Mt)},_offUpEvents:function(){var t=this.el.ownerDocument;m(t,"mouseup",this._onDrop),m(t,"touchend",this._onDrop),m(t,"pointerup",this._onDrop),m(t,"touchcancel",this._onDrop),m(document,"selectstart",this)},_onDrop:function(t){var e=this.el,r=this.options;nt=I(Y),ot=I(Y,r.draggable),q("drop",this,{evt:t}),X=Y&&Y.parentNode,nt=I(Y),ot=I(Y,r.draggable),zt.eventCanceled||(bt=!1,Et=!1,St=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),c&&E(document.body,"user-select",""),E(Y,"transform",""),t&&(pt&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(J===X||st&&"clone"!==st.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),Y&&(this.nativeDraggable&&m(Y,"dragend",this),Wt(Y),Y.style["will-change"]="",pt&&!bt&&S(Y,st?st.options.ghostClass:this.options.ghostClass,!1),S(Y,this.options.chosenClass,!1),Z({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:t}),J!==X?(nt>=0&&(Z({rootEl:X,name:"add",toEl:X,fromEl:J,originalEvent:t}),Z({sortable:this,name:"remove",toEl:X,originalEvent:t}),Z({rootEl:X,name:"sort",toEl:X,fromEl:J,originalEvent:t}),Z({sortable:this,name:"sort",toEl:X,originalEvent:t})),st&&st.save()):nt!==rt&&nt>=0&&(Z({sortable:this,name:"update",toEl:X,originalEvent:t}),Z({sortable:this,name:"sort",toEl:X,originalEvent:t})),zt.active&&(null!=nt&&-1!==nt||(nt=rt,ot=it),Z({sortable:this,name:"end",toEl:X,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){q("nulling",this),J=Y=X=K=$=tt=Q=et=lt=ut=pt=nt=ot=rt=it=gt=mt=st=at=zt.dragged=zt.ghost=zt.clone=zt.active=null,xt.forEach((function(t){t.checked=!0})),xt.length=ht=ct=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Y&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],r=this.el.children,n=0,i=r.length,o=this.options;n<i;n++)b(t=r[n],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Ut(t));return e},sort:function(t){var e={},r=this.el;this.toArray().forEach((function(t,n){var i=r.children[n];b(i,this.options.draggable,r,!1)&&(e[t]=i)}),this),t.forEach((function(t){e[t]&&(r.removeChild(e[t]),r.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return b(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var r=this.options;if(void 0===e)return r[t];var n=G.modifyOption(this,t,e);r[t]=void 0!==n?n:e,"group"===t&&Dt(r)},destroy:function(){q("destroy",this);var t=this.el;t[W]=null,m(t,"mousedown",this._onTapStart),m(t,"touchstart",this._onTapStart),m(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(m(t,"dragover",this),m(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),wt.splice(wt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!et){if(q("hideClone",this),zt.eventCanceled)return;E(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),et=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(et){if(q("showClone",this),zt.eventCanceled)return;J.contains(Y)&&!this.options.group.revertClone?J.insertBefore(tt,Y):$?J.insertBefore(tt,$):J.appendChild(tt),this.options.group.revertClone&&this.animate(Y,tt),E(tt,"display",""),et=!1}}else this._hideClone()}},At&&g(document,"touchmove",(function(t){(zt.active||bt)&&t.cancelable&&t.preventDefault()})),zt.utils={on:g,off:m,css:E,find:k,is:function(t,e){return!!b(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},throttle:P,closest:b,toggleClass:S,clone:N,index:I,nextTick:Vt,cancelNextTick:Gt,detectDirection:Rt,getChild:T},zt.get=function(t){return t[W]},zt.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(zt.utils=i({},zt.utils,t.utils)),G.mount(t)}))},zt.create=function(t,e){return new zt(t,e)},zt.version="1.10.2";var Ht,qt,Zt,Yt,Xt,Kt,Jt=[],$t=!1;function Qt(){Jt.forEach((function(t){clearInterval(t.pid)})),Jt=[]}function te(){clearInterval(Kt)}var ee,re=P((function(t,e,r,n){if(e.scroll){var i,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,u=x(),h=!1;qt!==r&&(qt=r,Qt(),Ht=e.scroll,i=e.scrollFn,!0===Ht&&(Ht=D(r,!0)));var c=0,f=Ht;do{var d=f,p=A(d),g=p.top,m=p.bottom,v=p.left,y=p.right,b=p.width,_=p.height,w=void 0,S=void 0,L=d.scrollWidth,k=d.scrollHeight,C=E(d),T=d.scrollLeft,O=d.scrollTop;d===u?(w=b<L&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),S=_<k&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(w=b<L&&("auto"===C.overflowX||"scroll"===C.overflowX),S=_<k&&("auto"===C.overflowY||"scroll"===C.overflowY));var I=w&&(Math.abs(y-o)<=s&&T+b<L)-(Math.abs(v-o)<=s&&!!T),R=S&&(Math.abs(m-a)<=s&&O+_<k)-(Math.abs(g-a)<=s&&!!O);if(!Jt[c])for(var B=0;B<=c;B++)Jt[B]||(Jt[B]={});Jt[c].vx==I&&Jt[c].vy==R&&Jt[c].el===d||(Jt[c].el=d,Jt[c].vx=I,Jt[c].vy=R,clearInterval(Jt[c].pid),0==I&&0==R||(h=!0,Jt[c].pid=setInterval(function(){n&&0===this.layer&&zt.active._onTouchMove(Xt);var e=Jt[this.layer].vy?Jt[this.layer].vy*l:0,r=Jt[this.layer].vx?Jt[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(zt.dragged.parentNode[W],r,e,t,Xt,Jt[this.layer].el)||M(Jt[this.layer].el,r,e)}.bind({layer:c}),24))),c++}while(e.bubbleScroll&&f!==u&&(f=D(f,!1)));$t=h}}),30),ne=function(t){var e=t.originalEvent,r=t.putSortable,n=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=r||i;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(h)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function ie(){}function oe(){}ie.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=T(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),r&&r.animateAll()},drop:ne},r(ie,{pluginName:"revertOnSpill"}),oe.prototype={onSpill:function(t){var e=t.dragEl,r=t.putSortable||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:ne},r(oe,{pluginName:"removeOnSpill"});var ae,se,le,ue,he,ce=[],fe=[],de=!1,pe=!1,ge=!1;function me(t,e){fe.forEach((function(r,n){var i=e.children[r.sortableIndex+(t?Number(n):0)];i?e.insertBefore(r,i):e.appendChild(r)}))}function ve(){ce.forEach((function(t){t!==le&&t.parentNode&&t.parentNode.removeChild(t)}))}return zt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):e.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll)),te(),Qt(),clearTimeout(_),_=void 0},nulling:function(){Xt=qt=Ht=$t=Kt=Zt=Yt=null,Jt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var r=this,n=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(n,i);if(Xt=t,e||u||l||c){re(t,this.options,o,e);var a=D(o,!0);!$t||Kt&&n===Zt&&i===Yt||(Kt&&te(),Kt=setInterval((function(){var o=D(document.elementFromPoint(n,i),!0);o!==a&&(a=o,Qt()),re(t,r.options,o,e)}),10),Zt=n,Yt=i)}else{if(!this.options.bubbleScroll||D(o,!0)===x())return void Qt();re(t,this.options,D(o,!1),!1)}}},r(t,{pluginName:"scroll",initializeByDefault:!0})}),zt.mount(oe,ie),zt.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;ee=e},dragOverValid:function(t){var e=t.completed,r=t.target,n=t.onMove,i=t.activeSortable,o=t.changed,a=t.cancel;if(i.options.swap){var s=this.sortable.el,l=this.options;if(r&&r!==s){var u=ee;!1!==n(r)?(S(r,l.swapClass,!0),ee=r):ee=null,u&&u!==ee&&S(u,l.swapClass,!1)}o(),e(!0),a()}},drop:function(t){var e,r,n,i,o,a,s=t.activeSortable,l=t.putSortable,u=t.dragEl,h=l||this.sortable,c=this.options;ee&&S(ee,c.swapClass,!1),ee&&(c.swap||l&&l.options.swap)&&u!==ee&&(h.captureAnimationState(),h!==s&&s.captureAnimationState(),r=ee,o=(e=u).parentNode,a=r.parentNode,o&&a&&!o.isEqualNode(r)&&!a.isEqualNode(e)&&(n=I(e),i=I(r),o.isEqualNode(a)&&n<i&&i++,o.insertBefore(r,o.children[n]),a.insertBefore(e,a.children[i])),h.animateAll(),h!==s&&s.animateAll())},nulling:function(){ee=null}},r(t,{pluginName:"swap",eventProperties:function(){return{swapItem:ee}}})}),zt.mount(new function(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?g(document,"pointerup",this._deselectMultiDrag):(g(document,"mouseup",this._deselectMultiDrag),g(document,"touchend",this._deselectMultiDrag)),g(document,"keydown",this._checkKeyDown),g(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,r){var n="";ce.length&&se===t?ce.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=r.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;le=e},delayEnded:function(){this.isMultiDrag=~ce.indexOf(le)},setupClone:function(t){var e=t.sortable,r=t.cancel;if(this.isMultiDrag){for(var n=0;n<ce.length;n++)fe.push(N(ce[n])),fe[n].sortableIndex=ce[n].sortableIndex,fe[n].draggable=!1,fe[n].style["will-change"]="",S(fe[n],this.options.selectedClass,!1),ce[n]===le&&S(fe[n],this.options.chosenClass,!1);e._hideClone(),r()}},clone:function(t){var e=t.sortable,r=t.rootEl,n=t.dispatchSortableEvent,i=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ce.length&&se===e&&(me(!0,r),n("clone"),i()))},showClone:function(t){var e=t.cloneNowShown,r=t.rootEl,n=t.cancel;this.isMultiDrag&&(me(!1,r),fe.forEach((function(t){E(t,"display","")})),e(),he=!1,n())},hideClone:function(t){var e=this,r=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(fe.forEach((function(t){E(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),r(),he=!0,n())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&se&&se.multiDrag._deselectMultiDrag(),ce.forEach((function(t){t.sortableIndex=I(t)})),ce=ce.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),ge=!0},dragStarted:function(t){var e=this,r=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){ce.forEach((function(t){t!==le&&E(t,"position","absolute")}));var n=A(le,!1,!0,!0);ce.forEach((function(t){t!==le&&z(t,n)})),pe=!0,de=!0}r.animateAll((function(){pe=!1,de=!1,e.options.animation&&ce.forEach((function(t){j(t)})),e.options.sort&&ve()}))}},dragOver:function(t){var e=t.target,r=t.completed,n=t.cancel;pe&&~ce.indexOf(e)&&(r(!1),n())},revert:function(t){var e=t.fromSortable,r=t.rootEl,n=t.sortable,i=t.dragRect;ce.length>1&&(ce.forEach((function(t){n.addAnimationState({target:t,rect:pe?A(t):i}),j(t),t.fromRect=i,e.removeAnimationState(t)})),pe=!1,function(t,e){ce.forEach((function(r,n){var i=e.children[r.sortableIndex+(t?Number(n):0)];i?e.insertBefore(r,i):e.appendChild(r)}))}(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(t){var e=t.sortable,r=t.isOwner,n=t.insertion,i=t.activeSortable,o=t.parentEl,a=t.putSortable,s=this.options;if(n){if(r&&i._hideClone(),de=!1,s.animation&&ce.length>1&&(pe||!r&&!i.options.sort&&!a)){var l=A(le,!1,!0,!0);ce.forEach((function(t){t!==le&&(z(t,l),o.appendChild(t))})),pe=!0}if(!r)if(pe||ve(),ce.length>1){var u=he;i._showClone(e),i.options.animation&&!he&&u&&fe.forEach((function(t){i.addAnimationState({target:t,rect:ue}),t.fromRect=ue,t.thisAnimationDuration=null}))}else i._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,i=t.activeSortable;if(ce.forEach((function(t){t.thisAnimationDuration=null})),i.options.animation&&!n&&i.multiDrag.isMultiDrag){ue=r({},e);var o=L(le,!0);ue.top-=o.f,ue.left-=o.e}},dragOverAnimationComplete:function(){pe&&(pe=!1,ve())},drop:function(t){var e=t.originalEvent,r=t.rootEl,n=t.parentEl,i=t.sortable,o=t.dispatchSortableEvent,a=t.oldIndex,s=t.putSortable,l=s||this.sortable;if(e){var u=this.options,h=n.children;if(!ge)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),S(le,u.selectedClass,!~ce.indexOf(le)),~ce.indexOf(le))ce.splice(ce.indexOf(le),1),ae=null,H({sortable:i,rootEl:r,name:"deselect",targetEl:le,originalEvt:e});else{if(ce.push(le),H({sortable:i,rootEl:r,name:"select",targetEl:le,originalEvt:e}),e.shiftKey&&ae&&i.el.contains(ae)){var c,f,d=I(ae),p=I(le);if(~d&&~p&&d!==p)for(p>d?(f=d,c=p):(f=p,c=d+1);f<c;f++)~ce.indexOf(h[f])||(S(h[f],u.selectedClass,!0),ce.push(h[f]),H({sortable:i,rootEl:r,name:"select",targetEl:h[f],originalEvt:e}))}else ae=le;se=l}if(ge&&this.isMultiDrag){if((n[W].options.sort||n!==r)&&ce.length>1){var g=A(le),m=I(le,":not(."+this.options.selectedClass+")");if(!de&&u.animation&&(le.thisAnimationDuration=null),l.captureAnimationState(),!de&&(u.animation&&(le.fromRect=g,ce.forEach((function(t){if(t.thisAnimationDuration=null,t!==le){var e=pe?A(t):g;t.fromRect=e,l.addAnimationState({target:t,rect:e})}}))),ve(),ce.forEach((function(t){h[m]?n.insertBefore(t,h[m]):n.appendChild(t),m++})),a===I(le))){var v=!1;ce.forEach((function(t){t.sortableIndex===I(t)||(v=!0)})),v&&o("update")}ce.forEach((function(t){j(t)})),l.animateAll()}se=l}(r===n||s&&"clone"!==s.lastPutMode)&&fe.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=ge=!1,fe.length=0},destroyGlobal:function(){this._deselectMultiDrag(),m(document,"pointerup",this._deselectMultiDrag),m(document,"mouseup",this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag),m(document,"keydown",this._checkKeyDown),m(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==ge&&ge||se!==this.sortable||t&&b(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;ce.length;){var e=ce[0];S(e,this.options.selectedClass,!1),ce.shift(),H({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},r(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[W];e&&e.options.multiDrag&&!~ce.indexOf(t)&&(se&&se!==e&&(se.multiDrag._deselectMultiDrag(),se=e),S(t,e.options.selectedClass,!0),ce.push(t))},deselect:function(t){var e=t.parentNode[W],r=ce.indexOf(t);e&&e.options.multiDrag&&~r&&(S(t,e.options.selectedClass,!1),ce.splice(r,1))}},eventProperties:function(){var t=this,e=[],r=[];return ce.forEach((function(n){var i;e.push({multiDragElement:n,index:n.sortableIndex}),i=pe&&n!==le?-1:pe?I(n,":not(."+t.options.selectedClass+")"):I(n),r.push({multiDragElement:n,index:i})})),{items:a(ce),clones:[].concat(fe),oldIndicies:e,newIndicies:r}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),zt}))},{}],50:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.5.0",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":45,"./external":46,"./load":51,"./object":55,"./support":70}],8:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=t("../generateID.js");L.ALS.Widgets.BaseWidget=L.Class.extend({initialize:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};this.objectToControl=n,this.events=a,this._inputID="adv-lyr_sys_input"+o(),this.type=t,this.id=e,this.label=r,this.callback=i,this.attributes=s,this.value="",this.container=this.toHtmlElement()},toHtmlElement:function(){var t=this.createContainer();return t.appendChild(this.createLabel()),t.appendChild(this._createInput()),t},createContainer:function(){var t=document.createElement("div");return t.className="adv-lyr-sys-widget-row",t},createLabel:function(){return this.labelWidget=document.createElement("label"),this.labelWidget.className="adv-lyr-sys-label",this.labelWidget.htmlFor=this._inputID,this.setLabelText(this.label),this.labelWidget},createInputElement:function(){var t=document.createElement("input");return t.setAttribute("type",this.type),t},_createInput:function(){var t=this;this.input=this.createInputElement(),this.input.id=this._inputID,this.input.setAttribute("data-id",this.id);var e,r,i=n(this.events);try{for(i.s();!(e=i.n()).done;){var o=e.value;this.input.addEventListener(o,(function(e){t.onChange(e)?t.input.classList.remove("invalid-input"):t.input.classList.add("invalid-input"),void 0!==t.objectToControl&&""!==t.callback&&t.objectToControl[t.callback](t)}))}}catch(t){i.e(t)}finally{i.f()}return this.setAttributes(this.attributes),""!==this.value?r=this.value:void 0!==this.attributes.value&&(r=this.attributes.value),this.input.value=r,this.input},setAttributes:function(t){for(var e in t)t.hasOwnProperty(e)&&this.input.setAttribute(e,t[e])},onChange:function(t){return!0},getId:function(){return this.id},getValue:function(){return this.input.value},setValue:function(t){this.input.value=t},setEnabled:function(t){this.input.disabled=!t},getEnabled:function(){return"true"!==this.input.disabled},getContainer:function(){return this.container},getLabelText:function(){if(void 0!==this.label)return this.labelWidget.innerText.slice(0,this.labelWidget.innerText.length-2)},setLabelText:function(t){this.labelWidget.innerText=t+":"},serialize:function(){return{type:this.type,id:this.id,label:this.label,callback:this.callback,attributes:this.attributes,value:this.value}},deserialize:function(t,e){for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}})},{"../generateID.js":6}],9:[function(t,e,r){"use strict";L.ALS.Widgets.Checkbox=L.ALS.Widgets.BaseWidget.extend({initialize:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";L.ALS.Widgets.BaseWidget.prototype.initialize.call(this,"checkbox",t,e,r,n,["change"],{}),this.setValue(!1)},getValue:function(){return this.input.checked},setValue:function(t){this.input.checked=t},setChecked:function(t){this.setChecked(t)},isChecked:function(){return this.getValue()}})},{}],10:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}L.ALS.Widgets.DropDownList=L.ALS.Widgets.BaseWidget.extend({initialize:function(t,e,r,n){L.ALS.Widgets.BaseWidget.prototype.initialize.call(this,"",t,e,r,n,["change"])},createInputElement:function(){return document.createElement("select")},addItem:function(t){var e=document.createElement("option");e.text=t,this.input.appendChild(e),L.ALS.dispatchEvent(this.input,"change")},removeItem:function(t){var e,r=n(this.input.childNodes);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.text===t)return void this.input.removeChild(i)}}catch(t){r.e(t)}finally{r.f()}}})},{}],11:[function(t,e,r){"use strict";L.ALS.Widgets.Number=L.ALS.Widgets.BaseWidget.extend({initialize:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};L.ALS.Widgets.BaseWidget.prototype.initialize.call(this,"number",t,e,r,n,["edit","change","keyup"],i)},getValue:function(){return parseFloat(this.input.value)},onChange:function(t){if(""===this.input.value)return!1;var e=parseFloat(this.input.value),r=parseFloat(this.input.getAttribute("min")),n=parseFloat(this.input.getAttribute("max"));return!(isNaN(e)||!isNaN(r)&&e<r||!isNaN(n)&&e>n)}})},{}],12:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}L.ALS.Widgets.SimpleLabel=L.ALS.Widgets.BaseWidget.extend({initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";L.ALS.Widgets.BaseWidget.prototype.initialize.call(this,"",t,""),this.setValue(e),this.setTextAlign(r),this._styleNames=["message","success","warning","error"]},toHtmlElement:function(){var t=this.createContainer();return t.appendChild(this._createInput()),t},createInputElement:function(){var t=document.createElement("div");return t.className="adv-lyr-sys-simple-label",t},setValue:function(t){this.input.innerText=t;var e="";""===t&&(e="none"),this.container.style.display=e},getValue:function(){return this.input.innerText},setTextAlign:function(t){this.input.style.textAlign=t},getTextAlign:function(){return this.input.style.textAlign},setStyle:function(t){var e,r=n(this._styleNames);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.input.classList.remove(i)}}catch(t){r.e(t)}finally{r.f()}"nostyle"!==t&&this.input.classList.add(t)}})},{}],13:[function(t,e,r){"use strict";L.ALS.Widgets.TextArea=L.ALS.Widgets.BaseWidget.extend({initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";L.ALS.Widgets.BaseWidget.prototype.initialize.call(this,"",t,"",r,n,["edit"],{autocomplete:"off",wrap:"soft",placeholder:e}),this.setText("")},toHtmlElement:function(){var t=this.createContainer();return t.appendChild(this._createInput()),t},createInputElement:function(){var t=document.createElement("textarea");return t.className="adv-lyr-sys-textarea",t},setEditable:function(t){this.setEnabled(t)},getEditable:function(t){return this.getEnabled()},setMaxHeight:function(t){this.input.setAttribute("rows",t)},setMonotype:function(t){t?this.input.classList.add("adv-lyr-sys-textarea-mono"):this.input.classList.remove("adv-lyr-sys-textarea-mono")},setText:function(t){this.setValue(t)},getText:function(){return this.getValue()},appendText:function(t){this.input.value+=t},appendRow:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.input.value+="\n"+t,e&&(this.input.value+="\n")},statics:{createConsole:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=new L.ALS.Widgets.TextArea("console","");return e.setEditable(!1),e.setMonotype(!0),e.setMaxHeight(t),e}}})},{}],14:[function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=t("time-input-polyfill/supportsTime"),o=t("time-input-polyfill");if(!i){var a,s=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}([].slice.call(document.querySelectorAll('input[type="time"]')));try{for(s.s();!(a=s.n()).done;){new o(a.value)}}catch(t){s.e(t)}finally{s.f()}}L.ALS.Widgets.Time=L.ALS.Widgets.BaseWidget.extend({setValue:function(t){L.ALS.Widgets.BaseWidget.prototype.setValue.call(this,t),i||this.input.polyfill.update()}})},{"time-input-polyfill":165,"time-input-polyfill/supportsTime":166}],166:[function(t,e,r){"use strict";e.exports=t("./core/helpers/supportsTime")},{"./core/helpers/supportsTime":136}],165:[function(t,e,r){"use strict";var n,i=t("./core/setters/apply_default"),o=t("./core/setters/update_time"),a=t("./core/setters/set_data_attribute"),s=t("./core/events/bind_events"),l=t("./core/setters/switch_times"),u=t("./core/getters/get_label"),h=t("./core/accessibility/create_a11y_block"),c=!1;function f(t){t.setAttribute("autocomplete","off"),t.setAttribute("aria-hidden",!0),c||(n=h(),c=!0);var e=u(t);t.polyfill={$a11y:n,label:e,autoSwap:!0,update:function(){o(t)},swap:function(e){l(t,e)}},""===t.value||/--/.test(t.value)?(i(t),a(t,"")):(o(t),a(t,t.value)),s(t)}window&&(window.TimePolyfill=f),e&&(e.exports=f)},{"./core/accessibility/create_a11y_block":118,"./core/events/bind_events":125,"./core/getters/get_label":132,"./core/setters/apply_default":143,"./core/setters/set_data_attribute":152,"./core/setters/switch_times":157,"./core/setters/update_time":159}],15:[function(t,e,r){"use strict";L.ALS.Widgets.ValueLabel=L.ALS.Widgets.SimpleLabel.extend({initialize:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"description",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nostyle",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";L.ALS.Widgets.SimpleLabel.prototype.initialize.call(this,t,""),this.setDescription(e),this.setFormatNumbers(i),this.setValue(a),this.setUnits(r),this.setUnitsPosition(n),this.setStyle(o)},setDescription:function(t){this.description=t,this._updateValue()},getDescription:function(){return this.description},setFormatNumbers:function(t){this.formatNumbers=t,this._updateValue()},getFormatNumbers:function(){return this.formatNumbers},setValue:function(t){this._labelValue=t,this._updateValue()},getValue:function(){return this._labelValue},setUnits:function(t){this.units=t,this._updateValue()},getUnits:function(){return this.units},setUnitsPosition:function(t){this.unitsPosition=t,this._updateValue()},getUnitsPosition:function(){return this.unitsPosition},_updateValue:function(){var t=""!==this.units,e="description"===this.unitsPosition,r=this.description;e&&t&&(r+=" ("+this.units+")"),r+=": "+(this.formatNumbers?L.ALS.formatNumber(this._labelValue):this._labelValue),!e&&t&&(r+=" "+this.units),L.ALS.Widgets.SimpleLabel.prototype.setValue.call(this,r)},getActualValue:function(){return this.value}})},{}],17:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r)}(t,null,[{key:"isEqual",value:function(t,e){return Math.abs(t-e)<=this.precision}},{key:"isLessThanOrEqualTo",value:function(t,e){return t-e<=this.precision}},{key:"isGreaterThanOrEqualTo",value:function(t,e){return t-e>=-this.precision}},{key:"isPointOnLine",value:function(t,e){var r=e[0],n=e[1],i=r[0],o=r[1],a=n[0],s=n[1],l=t[0],u=t[1],h=Math.min(i,a),c=Math.max(i,a),f=Math.min(o,s),d=Math.max(o,s);if(!(this.isGreaterThanOrEqualTo(u,f)&&this.isLessThanOrEqualTo(u,d)&&this.isGreaterThanOrEqualTo(l,h)&&this.isLessThanOrEqualTo(l,c)))return!1;var p=this.getSlopeAndIntercept(e);return void 0===p?this.isEqual(i,l):this.isEqual(p.slope*l+p.intercept,u)}},{key:"getSlopeAndIntercept",value:function(t){var e=t[0],r=t[1],n=e[0],i=e[1],o=r[0],a=r[1],s=o-n;if(!this.isEqual(s,0)){var l=(a-i)/s;return{slope:l,intercept:i-l*n}}}},{key:"isLineOnEdgeOfPolygon",value:function(t,e){if(2!==t.length)return!1;var r,i=!0,o=n(t);try{for(o.s();!(r=o.n()).done;){for(var a=r.value,s=!1,l=0;l<e.length-1;l++){var u=[e[l],e[l+1]];if(this.isPointOnLine(a,u)){s=!0;break}}i=i&&s}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"clipLineByPolygon",value:function(t,e){if(2===t.length){for(var r,i,o,a=[],s=0;s<e.length-1;s++){var l=[e[s],e[s+1]],u=this.linesIntersection(t,l);if(void 0!==u){var h,c=n(u);try{for(c.s();!(h=c.n()).done;){var f=h.value;a.push(f)}}catch(t){c.e(t)}finally{c.f()}}}for(var d=0;d<a.length;d++)for(var p=d+1;p<a.length;p++){var g=a[d],m=a[p],v=this.distanceBetweenPoints(g,m);void 0!==o&&this.isLessThanOrEqualTo(v,o)||(r=g,i=m,o=v)}if(void 0!==o){var y=r[0],b=i[0],_=r[1],w=i[1];return this.isEqual(y,b)?this.isGreaterThanOrEqualTo(_,w)?[r,i]:[i,r]:this.isLessThanOrEqualTo(y,b)?[r,i]:[i,r]}}}},{key:"yForX",value:function(t,e){var r=this.getSlopeAndIntercept(t);if(void 0!==r)return r.slope*e+r.intercept}},{key:"linesIntersection",value:function(t,e){var r,i,o,a=t[0],s=e[0],l=a[0],u=s[0],h=this.getSlopeAndIntercept(t),c=this.getSlopeAndIntercept(e),f=!1;if(void 0===h&&void 0!==c?(r=l,i=t,o=e):void 0===c&&void 0!==h?(r=u,i=e,o=t):void 0===h&&void 0===c&&(f=!0),void 0!==o){var d=[r,this.yForX(o,r)];return this.isPointOnLine(d,o)&&this.isPointOnLine(d,i)?[d]:void 0}if(!f){var p=h.slope-c.slope,g=c.intercept-h.intercept;if(this.isEqual(p,0)){if(!this.isEqual(g,0))return;f=!0}if(!f){var m=g/p,v=[m,this.yForX(t,m)];return this.isPointOnLine(v,t)&&this.isPointOnLine(v,e)?[v]:void 0}}var y,b=[],_=n(t);try{for(_.s();!(y=_.n()).done;){var w=y.value;this.isPointOnLine(w,e)&&b.push(w)}}catch(t){_.e(t)}finally{_.f()}var S,E=n(e);try{for(E.s();!(S=E.n()).done;){var L=S.value;this.isPointOnLine(L,t)&&b.push(L)}}catch(t){E.e(t)}finally{E.f()}if(0!==b.length)return b}},{key:"distanceBetweenPoints",value:function(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))}},{key:"arePointsEqual",value:function(t,e){return this.isEqual(t[0],e[0])&&this.isEqual(t[1],e[1])}}]),t}();a.precision=1e-5,e.exports=a},{}],18:[function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=t("@turf/union").default,a=t("@turf/bbox").default,s=t("@turf/helpers"),l=t("../MathTools.js"),u=t("roman-numerals"),h=t("@mapbox/geojson-merge");t("./SynthGridWizard.js"),L.ALS.SynthGridLayer=L.ALS.Layer.extend({defaultName:"Grid Layer",gridBorderColor:"#6495ed",gridFillColor:"#6495ed",meridiansColor:"#ad0000",parallelsColor:"#007800",lineThickness:2,_alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",_currentStandardScale:-1,isDisplayed:!0,_doHidePolygonWidgets:!1,init:function(t){this.selectedPolygons={},this.selectedPolygonsWidgets={};var e={min:1,step:1,value:4096},r=new L.ALS.Widgets.SimpleLabel("calculateParametersError");r.setStyle("error");var n=new L.ALS.Widgets.SimpleLabel("cameraParametersWarning");n.setStyle("warning");for(var i=[new L.ALS.Widgets.Checkbox("hidePolygonWidgets","Hide widgets on the map",this,"_hidePolygonWidgets"),new L.ALS.Widgets.Number("lineThickness","Line thickness",this,"_setLineThickness",{min:1,max:20,value:this.lineThickness}),new L.ALS.Widgets.Color("gridBorderColor","Border color",this,"_setColor",{value:this.gridBorderColor}),new L.ALS.Widgets.Color("gridFillColor","Fill color",this,"_setColor",{value:this.gridFillColor}),new L.ALS.Widgets.Color("meridiansColor","Paths by meridians color",this,"_setColor",{value:this.meridiansColor}),new L.ALS.Widgets.Color("parallelsColor","Paths by parallels color",this,"_setColor",{value:this.parallelsColor}),new L.ALS.Widgets.Number("airportLat","Airport latitude",this,"_setAirportLatLng",{min:-90,max:90,step:.01}),new L.ALS.Widgets.Number("airportLng","Airport longitude",this,"_setAirportLatLng",{min:-180,max:180,step:.01}),new L.ALS.Widgets.Number("aircraftSpeed","Aircraft speed (km/h)",this,"calculateParameters",{min:0,step:1,value:350}),new L.ALS.Widgets.Number("imageScale","Image scale denominator",this,"calculateParameters",{min:1,step:1,value:1e4}),new L.ALS.Widgets.Number("cameraWidth","Camera width (px)",this,"calculateParameters",e),new L.ALS.Widgets.Number("cameraHeight","Camera height (px)",this,"calculateParameters",e),new L.ALS.Widgets.Number("pixelWidth","Pixel size (μm)",this,"calculateParameters",{min:.001,step:.001,value:1}),new L.ALS.Widgets.Number("overlayBetweenPaths","Overlay between images from adjacent paths (%)",this,"calculateParameters",{min:60,max:100,step:.1,value:60}),new L.ALS.Widgets.Number("overlayBetweenImages","Overlay between images from the same path (%)",this,"calculateParameters",{min:30,max:100,step:.1,value:50}),new L.ALS.Widgets.Number("focalLength","Focal length (mm)",this,"calculateParameters",{min:.001,step:1,value:100}),r,n],o=[new L.ALS.Widgets.ValueLabel("lngPathsCount","Paths count in one cell by parallels"),new L.ALS.Widgets.ValueLabel("latPathsCount","Paths count in one cell by meridians"),new L.ALS.Widgets.ValueLabel("lngPathsLength","Length of paths by parallels","m"),new L.ALS.Widgets.ValueLabel("latPathsLength","Length of paths by meridians","m"),new L.ALS.Widgets.ValueLabel("lngFlightTime","Flight time by parallels","h"),new L.ALS.Widgets.ValueLabel("latFlightTime","Flight time by meridians","h"),new L.ALS.Widgets.ValueLabel("lngCellSizeInMeters","Mean cell width","m"),new L.ALS.Widgets.ValueLabel("latCellSizeInMeters","Mean cell height","m"),new L.ALS.Widgets.ValueLabel("selectedArea","Selected area","sq.m."),new L.ALS.Widgets.ValueLabel("flightHeight","Flight height (m)"),new L.ALS.Widgets.ValueLabel("lx","Image height, lx","m"),new L.ALS.Widgets.ValueLabel("Lx","Image height on the ground, Lx","m"),new L.ALS.Widgets.ValueLabel("Bx","Distance between photographing positions, Bx","m"),new L.ALS.Widgets.ValueLabel("ly","Image width, ly","m"),new L.ALS.Widgets.ValueLabel("Ly","Image width on the ground, Ly","m"),new L.ALS.Widgets.ValueLabel("By","Distance between adjacent paths, By","m"),new L.ALS.Widgets.ValueLabel("GSI","GSI","m"),new L.ALS.Widgets.ValueLabel("IFOV","IFOV","μrad"),new L.ALS.Widgets.ValueLabel("GIFOV","GIFOV","m"),new L.ALS.Widgets.ValueLabel("FOV","FOV","deg"),new L.ALS.Widgets.ValueLabel("GFOV","GFOV","m")],a=0,s=i;a<s.length;a++){var l=s[a];this.addWidget(l)}for(var u=0,h=o;u<h.length;u++){var c=h[u];c.setFormatNumbers(!0),this.addWidget(c)}this.lngDistance=parseFloat(t.gridLngDistance),this.latDistance=parseFloat(t.gridLatDistance);var f=t.gridStandardScales;if("Custom"!==f){for(var d="",p=2;p<f.length;p++){var g=f[p];" "!==g&&(d+=g)}this._currentStandardScale=parseInt(d)}else this._currentStandardScale=1/0;this.hidingThreshold=this._currentStandardScale===1/0?15:70;for(var m=0,v=["polygonGroup","labelsGroup","widgetsGroup","bordersGroup"];m<v.length;m++){var y=v[m];this[y]=L.featureGroup(),this.addLayers(this[y])}this.addEventListenerTo(this.map,"moveend resize","_onMapPan"),this.addEventListenerTo(this.map,"zoomend","_onMapZoom");var b=L.divIcon({iconSize:null,className:"",html:"<div class='grd-lyr-airport-icon fas fa-plane'></div>"});this._airportMarker=L.marker(this.map.getCenter(),{icon:b,draggable:!0}),this.addEventListenerTo(this._airportMarker,"drag","onMarkerDrag"),this._airportMarker.fire("drag"),this.addLayers(this._airportMarker),this.onNameChange(),this._updateGrid()},onMarkerDrag:function(){var t=this._airportMarker.getLatLng();this.getControlById("airportLat").setValue(t.lat.toFixed(5)),this.getControlById("airportLng").setValue(t.lng.toFixed(5)),this._drawPaths()},onNameChange:function(){this._airportMarker.bindPopup("Airport for layer "+this.name)},_onMapPan:function(){var t=this;if(this.isShown&&this.isDisplayed){this.polygonGroup.clearLayers(),this.labelsGroup.clearLayers();var e,r,n,i,o=this.map.getBounds(),a=o.getNorthWest(),s=o.getNorthEast(),l=o.getSouthWest(),h=o.getSouthEast();a.lat>s.lat?(e=l.lat,r=a.lat):(e=h.lat,r=s.lat),s.lng>h.lng?(n=a.lng,i=s.lng):(n=l.lng,i=h.lng),e=this._closestLess(e,this.latDistance),r=this._closestGreater(r,this.latDistance),n=this._closestLess(n,this.lngDistance),i=this._closestGreater(i,this.lngDistance);for(var c=this.map.getBounds().getNorthWest(),f=!0,d=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",i=new L.ALS.WidgetLayer(e,n);i.addWidget(new L.ALS.Widgets.SimpleLabel("c",r,"center")),t.labelsGroup.addLayer(i.getLayer())},p=e;p<=r;p+=this.latDistance){d([p,c.lng],this.toFixed(p),"leftCenter");for(var g=function(e){f&&d([c.lat,e],t.toFixed(e),"topCenter");var r=L.polygon([[p,e],[p+t.latDistance,e],[p+t.latDistance,e+t.lngDistance],[p,e+t.lngDistance]]),n=t._generatePolygonName(r),i=void 0!==t.selectedPolygons[n];if(r.setStyle({color:t.gridBorderColor,fillColor:t.gridFillColor,fill:i,weight:t.lineThickness}),t.addEventListenerTo(r,"dblclick contextmenu","_selectOrDeselectPolygon"),t.polygonGroup.addLayer(r),i&&(t.selectedPolygons[n]=r),t._currentStandardScale===1/0)return r.polygonName="Not in standard scale system","continue";var o=t.toFixed(p+t.latDistance/2),a=t.toFixed(e+t.lngDistance/2),s=Math.floor(Math.abs(o)/4),l=t._alphabet[s]+"-"+(Math.floor(a/6)+31),h=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=t.toFixed(r),s=t.toFixed(n),l=t.toFixed(t._closestLess(o,i)),u=t.toFixed(t._closestLess(a,s));return e*(e+Math.floor((l-o)/(i/e))+1-1)-Math.floor((u-a)/(s/e))};if(5e5===t._currentStandardScale?l+="-"+h(2):3e5===t._currentStandardScale?l=u.toRoman(h(3))+"-"+l:2e5===t._currentStandardScale?l+="-"+u.toRoman(h(6)):t._currentStandardScale<=1e5&&(l+="-"+h(12)),t._currentStandardScale<=5e4&&t._currentStandardScale>5e3)l+="-"+t._alphabet[h(2,2/6,.5)-1],t._currentStandardScale<=25e3&&(l+="-"+t._alphabet[h(2,1/6,.25)-1].toLowerCase()),t._currentStandardScale<=1e4&&(l+="-"+h(2,5/60,.125));else if(t._currentStandardScale<=5e3){if(l+="(",t._currentStandardScale<=5e3&&(l+=h(16,2/6,.5)),2e3===t._currentStandardScale){var g=h(3,1.25/60,.03125)-1;g>=6?g-=6:g+=3,l+="-"+t._alphabet[g].toLowerCase()}l+=")"}p<0&&(l+=" (S)"),r.polygonName=l,d([p+t.latDistance/2,e+t.lngDistance/2],l)},m=n;m<=i;m+=this.lngDistance)g(m);f=!1}}},_closestGreater:function(t,e){return Math.ceil(t/e)*e},_closestLess:function(t,e){return Math.floor(t/e)*e},_onMapZoom:function(){if(this.isShown){var t=this.map.getBounds().getNorthWest(),e=L.latLng(t.lat,t.lng+this.lngDistance),r=this.map.latLngToContainerPoint(e).x,n=r<this.hidingThreshold;n&&this.isDisplayed?(this.polygonGroup.remove(),this.bordersGroup.remove(),this.labelsGroup.remove(),this.widgetsGroup.remove(),this.isDisplayed=!1):n||this.isDisplayed||(this.isDisplayed=!0,this.polygonGroup.addTo(this.map),this.bordersGroup.addTo(this.map),this.labelsGroup.addTo(this.map),this._onMapPan()),n=r<200,this.isDisplayed&&(n?this.widgetsGroup.remove():n||this.widgetsGroup.addTo(this.map))}},_selectOrDeselectPolygon:function(t){var e=t.target,r=this._generatePolygonName(e);if(void 0!==this.selectedPolygons[r]){e.setStyle({fill:!1}),delete this.selectedPolygons[r];var n=this.selectedPolygonsWidgets[r].getLayer();this.widgetsGroup.removeLayer(n),delete this.selectedPolygonsWidgets[r]}else{e.setStyle({fill:!0}),this.selectedPolygons[r]=e;var i=new L.ALS.WidgetLayer(e.getLatLngs()[0][1],"topLeft"),o={min:1,value:1},a=new L.ALS.Widgets.SimpleLabel("error");a.setStyle("error");for(var s=0,l=[new L.ALS.Widgets.Number("minHeight","Min height (m)",this,"_calculatePolygonParameters",o),new L.ALS.Widgets.Number("maxHeight","Max height (m)",this,"_calculatePolygonParameters",o),new L.ALS.Widgets.ValueLabel("meanHeight","Mean height","m"),new L.ALS.Widgets.ValueLabel("absoluteHeight","Absolute height","m"),new L.ALS.Widgets.ValueLabel("elevationDifference","(Max height - Min height) / Flight height"),new L.ALS.Widgets.ValueLabel("reliefType","Relief type"),a];s<l.length;s++){var u=l[s];i.addWidget(u)}for(var h=0,c=["meanHeight","absoluteHeight","elevationDifference"];h<c.length;h++){var f=c[h];i.getControlById(f).setFormatNumbers(!0)}this.selectedPolygonsWidgets[r]=i,this._doHidePolygonWidgets||this.widgetsGroup.addLayer(i.getLayer())}this._calculatePolygonParameters(),this._drawPaths()},_setColor:function(t){this[t.getId()]=t.getValue(),this._updateGrid()},_setLineThickness:function(t){this.lineThickness=t.getValue(),this._updateGrid()},_updateGrid:function(){this._onMapPan(),this.calculateParameters(),this._calculatePolygonParameters(),this._drawPaths()},_hidePolygonWidgets:function(t){for(var e in this._doHidePolygonWidgets=t.getValue(),this.selectedPolygons)if(this.selectedPolygons.hasOwnProperty(e)){var r=this.selectedPolygonsWidgets[e].getLayer();this._doHidePolygonWidgets?this.widgetsGroup.removeLayer(r):this.widgetsGroup.addLayer(r)}},_generatePolygonName:function(t){var e=t.getLatLngs()[0][0];return"p_"+e.lat+"_"+e.lng},statics:{wizard:new L.ALS.SynthGridWizard},_setAirportLatLng:function(){this._airportMarker.setLatLng([this.getControlById("airportLat").getValue(),this.getControlById("airportLng").getValue()]),this._drawPaths()},_calculatePolygonParameters:function(){var t=Math.round(this.latCellSizeInMeters*this.lngCellSizeInMeters);this.selectedArea=0;var e=void 0;for(var r in this.selectedPolygons)if(this.selectedPolygons.hasOwnProperty(r)){e=this._addSelectedPolygonToGeoJSON(e,r),this.selectedArea+=t;var i=this.selectedPolygons[r],o=this.selectedPolygonsWidgets[r];i.minHeight=o.getControlById("minHeight").getValue(),i.maxHeight=o.getControlById("maxHeight").getValue();var a=o.getControlById("error");if(i.minHeight>i.maxHeight)a.setValue("Min height should be less than or equal to max height!");else{a.setValue("");var s=i.maxHeight-i.minHeight;i.meanHeight=Math.round(s/2),i.absoluteHeight=this.flightHeight+i.meanHeight,i.elevationDifference=s/this.flightHeight,i.reliefType=i.elevationDifference>=.2?"Variable":"Plain";for(var l=0,u=["meanHeight","absoluteHeight","elevationDifference","reliefType"];l<u.length;l++){var h=u[l],c=void 0;try{c=this.toFixed(i[h])}catch(t){c=i[h]}o.getControlById(h).setValue(c)}}}if(this.getControlById("selectedArea").setValue(this.selectedArea),this.bordersGroup.clearLayers(),void 0!==e){var f,d=e.geometry,p="MultiPolygon"===d.type,g=n(d.coordinates);try{for(g.s();!(f=g.n()).done;){var m,v=f.value,y=L.polyline([],{color:this.gridBorderColor,weight:2*this.lineThickness}),b=n(p?v[0]:v);try{for(b.s();!(m=b.n()).done;){var _=m.value;y.addLatLng([_[1],_[0]])}}catch(t){b.e(t)}finally{b.f()}this.bordersGroup.addLayer(y)}}catch(t){g.e(t)}finally{g.f()}}},calculateParameters:function(){for(var t=0,e=["cameraWidth","cameraHeight","pixelWidth","focalLength","imageScale","overlayBetweenPaths","overlayBetweenImages","aircraftSpeed"];t<e.length;t++){var r=e[t];this[r]=this.getControlById(r).getValue()}this.flightHeight=this.imageScale*this.focalLength;var n=this.getControlById("cameraParametersWarning");this.cameraHeight>this.cameraWidth?n.setValue("Camera height is greater than camera width! It means that camera will be rotated by 90°."):n.setValue("");var i=1e-6*this.pixelWidth,o=.001*this.focalLength;this.ly=this.cameraWidth*i,this.Ly=this.ly*this.imageScale,this.By=this.Ly*(100-this.overlayBetweenPaths)/100;for(var a=0,l=["lat","lng"];a<l.length;a++){var u=l[a],h=u+"CellSizeInMeters",c=u+"PathsCount",f=Math.round(s.radiansToLength(s.degreesToRadians(this[u+"Distance"]),"meters")),d=Math.ceil(f/this.By);this[h]=f,this[c]=d,this.getControlById(h).setValue(this.toFixed(f)),this.getControlById(c).setValue(d)}this.lx=this.cameraHeight*i,this.Lx=this.lx*this.imageScale,this.Bx=this.Lx*(100-this.overlayBetweenImages)/100,this.doubleBasis=2*s.lengthToDegrees(this.Bx,"meters"),this.GSI=i*this.imageScale,this.IFOV=i/o*1e6,this.GIFOV=this.GSI,this.FOV=this.cameraWidth*this.IFOV,this.GFOV=this.cameraWidth*this.GSI,this.aircraftSpeedInMetersPerSecond=1*this.aircraftSpeed/36;for(var p=0,g=["flightHeight","lx","Lx","Bx","ly","Ly","By","GSI","IFOV","GIFOV","FOV","GFOV"];p<g.length;p++){var m=g[p],v=void 0;try{v=this.toFixed(this[m])}catch(t){v=this[m]}this.getControlById(m).setValue(v)}this._drawPaths(),this._calculatePolygonParameters()},_drawPaths:function(){for(var t=0,e=[["pathsByParallels","parallels",this.parallelsColor],["pathsByMeridians","meridians",this.meridiansColor]];t<e.length;t++){var r=e[t],n=r[0];void 0!==this[n]&&this.removeLayers(this[n]),this[n]=L.polyline([],{color:r[2],weight:this.lineThickness})}var i=this.getControlById("calculateParametersError"),o=this.lngPathsCount,a=this.latPathsCount;void 0!==o?o>=20||a>=20?i.setValue("Calculated paths count is too big, it should be less than 20. Please, check your values."):o<=2||a<=2?i.setValue("Calculated paths count is too small, it should be greater than 2. Please, check your values."):(i.setValue(""),this._drawPathsWorker(!0),this._drawPathsWorker(!1)):i.setValue("Distance between paths hasn't been calculated!")},_drawPathsWorker:function(t){var e,r;t?(e="pathsByParallels",r="lng"):(e="pathsByMeridians",r="lat");var i=this.lngPathsCount,o=this.latPathsCount,u=this._airportMarker.getLatLng();this[e].addLatLng(u);var h=void 0;for(var c in this.selectedPolygons)this.selectedPolygons.hasOwnProperty(c)&&(h=this._addSelectedPolygonToGeoJSON(h,c));if(void 0!==h){var f,d=h.geometry,p="MultiPolygon"===d.type,g=n(d.coordinates);try{for(g.s();!(f=g.n()).done;)for(var m=f.value,v=p?m:[m],y=s.polygon(v),b=a(y),_=b[3],w=b[1],S=b[0],E=b[2],L=!1,k=Math.abs(_-w),x=Math.abs(E-S),A=i*Math.ceil(k/this.latDistance),C=o*Math.ceil(x/this.lngDistance),T=k/A,O=x/C,I=_,R=S,D=y.geometry.coordinates[0];I>=w&&R<=E;){var B;B=t?[[S,I],[E,I]]:[[R,_],[R,w]];var P=l.clipLineByPolygon(B,D),M=void 0,N=void 0;t?(M=0,N=this.doubleBasis):(M=1,N=-this.doubleBasis);var z,j=[],W=n(P);try{for(W.s();!(z=W.n()).done;){var F=z.value;j.push([F[0],F[1]])}}catch(t){W.e(t)}finally{W.f()}j[0][M]-=N,j[1][M]+=N;var U=void 0,V=void 0;L?(U=j[1],V=j[0]):(U=j[0],V=j[1]);for(var G=t?"pathsByParallels":"pathsByMeridians",H=0,q=[U,V];H<q.length;H++){var Z=q[H];this[G].addLatLng([Z[1],Z[0]])}L=!L,t?I-=T:R+=O}}catch(t){g.e(t)}finally{g.f()}this[e].addLatLng(u),this.addLayers(this[e]);for(var Y=Math.round(this.lineLengthUsingFlightHeight(this[e])),X=0,K=[["pathLength","PathsLength",Y],["flightTime","FlightTime",parseFloat((Y/this.aircraftSpeedInMetersPerSecond/3600).toFixed(2))],["pathsCount","PathsCount",this[r+"PathsCount"]]];X<K.length;X++){var J=K[X],$=J[2];this[e][J[0]]=$,this.getControlById(r+J[1]).setValue($)}}},lineLengthUsingFlightHeight:function(t){for(var e=6371e3+this.flightHeight,r=t.getLatLngs(),n=0,i=0;i<r.length-1;i++){var o=r[i],a=r[i+1],l=s.degreesToRadians(o.lat),u=s.degreesToRadians(a.lat),h=u-l,c=s.degreesToRadians(a.lng-o.lng),f=Math.pow(Math.sin(h/2),2)+Math.cos(l)*Math.cos(u)*Math.pow(Math.sin(c/2),2);n+=2*e*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}return n},toFixed:function(t){return parseFloat(t.toFixed(5))},_addSelectedPolygonToGeoJSON:function(t,e){var r=this.selectedPolygons[e].toGeoJSON();return void 0===t?r:o(t,r)},toGeoJSON:function(){var t=[];for(var e in this.selectedPolygons)if(this.selectedPolygons.hasOwnProperty(e)){for(var r=this.selectedPolygons[e],i=r.toGeoJSON(),o=0,a=["polygonName","minHeight","maxHeight","meanHeight","absoluteHeight","reliefType","elevationDifference"];o<a.length;o++){var s=a[o];i.properties[s]=r[s]}i.properties.name="Selected cell",t.push(i)}var l=this._airportMarker.toGeoJSON();if(l.name="Airport",t.push(l),void 0===this.pathsByMeridians||void 0===this.pathsByParallels)return window.alert("No paths has been drawn! You'll get only selected gird cells and airport position."),h.merge(t);var u=this.pathsByMeridians.toGeoJSON();u.properties.name="Flight paths by meridians";var c=this.pathsByParallels.toGeoJSON();c.properties.name="Flight paths by parallels";for(var f=["cameraWidth","cameraHeight","pixelWidth","focalLength","flightHeight","overlayBetweenPaths","overlayBetweenImages","imageScale","ly","Ly","By","lx","Lx","Bx","GSI","IFOV","GIFOV","FOV","GFOV","latCellSizeInMeters","lngCellSizeInMeters","selectedArea"],d=0,p=[u,c];d<p.length;d++){var g,m=p[d],v=n(f);try{for(v.s();!(g=v.n()).done;){var y=g.value;m.properties[y]=this[y]}}catch(t){v.e(t)}finally{v.f()}t.push(m)}for(var b=["pathLength","flightTime","pathsCount"],_=0,w=[["pathsByParallels",c],["pathsByMeridians",u]];_<w.length;_++){var S,E=w[_],L=n(b);try{for(L.s();!(S=L.n()).done;){var k=S.value;E[1].properties[k]=this[E[0]][k]}}catch(t){L.e(t)}finally{L.f()}}return h.merge(t)}})},{"../MathTools.js":17,"./SynthGridWizard.js":19,"@mapbox/geojson-merge":21,"@turf/bbox":23,"@turf/helpers":26,"@turf/union":27,"roman-numerals":95}],19:[function(t,e,r){"use strict";L.ALS.SynthGridWizard=L.ALS.Wizard.extend({displayName:"Grid Layer",standardScales:{"1:1 000 000":[4,6],"1:500 000":[2,3],"1:300 000":[1+20/60,2],"1:200 000":[40/60,1],"1:100 000":[20/60,.5],"1:50 000":[10/60,.25],"1:25 000":[5/60,.125],"1:10 000":[2.5/60,.0625],"1:5 000":[1.25/60,.03125],"1:2 000":[25/3600,37.5/3600]},initialize:function(){L.ALS.Wizard.prototype.initialize.call(this);var t=new L.ALS.Widgets.SimpleLabel("notificationLabel","If zoom is too low, generated grid will be hidden. Please, zoom in to see it.\n\t\t\tTo select a polygon, either click right mouse button (or tap and hold) or double-click on it.");t.setStyle("message");for(var e=new L.ALS.Widgets.DropDownList("gridStandardScales","Grid scale",this,"onGridStandardScalesChange"),r=0,n=[e,new L.ALS.Widgets.Number("gridLngDistance","Distance between parallels",void 0,"",{min:1e-4,max:180,step:.001}),new L.ALS.Widgets.Number("gridLatDistance","Distance between meridians",void 0,"",{min:1e-4,max:90,step:.001}),t];r<n.length;r++){var i=n[r];this.addWidget(i)}for(var o in this.standardScales)this.standardScales.hasOwnProperty(o)&&e.addItem(o);e.addItem("Custom")},onGridStandardScalesChange:function(t){var e=t.getValue(),r=this.getControlById("gridLatDistance"),n=this.getControlById("gridLngDistance"),i="Custom"===e;if(!i){var o=this.standardScales[e];r.setValue(o[0]),n.setValue(o[1])}r.setEnabled(i),n.setEnabled(i)}})},{}],26:[function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e){void 0===e&&(e="kilometers");var n=r.factors[e];if(!n)throw new Error(e+" units is invalid");return t*n}function a(t,e){void 0===e&&(e="kilometers");var n=r.factors[e];if(!n)throw new Error(e+" units is invalid");return t/n}function s(t){return t%(2*Math.PI)*180/Math.PI}Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=6371008.8,r.factors={centimeters:100*r.earthRadius,centimetres:100*r.earthRadius,degrees:r.earthRadius/111325,feet:3.28084*r.earthRadius,inches:39.37*r.earthRadius,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:1e3*r.earthRadius,millimetres:1e3*r.earthRadius,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius/1.0936},r.earthRadius,r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},r.polygon=i,r.radiansToLength=o,r.lengthToDegrees=function(t,e){return s(a(t,e))},r.degreesToRadians=function(t){return t%360*Math.PI/180}},{}],95:[function(t,e,r){"use strict";e.exports={toRoman:t("./lib/toRoman.js")}},{"./lib/toArabic.js":96,"./lib/toRoman.js":97}],27:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("martinez-polygon-clipping"),i=t("@turf/invariant"),o=t("@turf/helpers");r.default=function(t,e,r){void 0===r&&(r={});var a=i.getGeom(t).coordinates,s=i.getGeom(e).coordinates,l=n.union(a,s);return 0===l.length?null:1===l.length?o.polygon(l[0],r.properties):o.multiPolygon(l,r.properties)}},{"@turf/helpers":28,"@turf/invariant":29,"martinez-polygon-clipping":77}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("@turf/meta");r.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},{"@turf/meta":25}],21:[function(t,e,r){"use strict";var n=t("@mapbox/geojson-normalize");t("geojson-stream"),t("fs");e.exports.merge=function(t){for(var e={type:"FeatureCollection",features:[]},r=0;r<t.length;r++)for(var i=n(t[r]),o=0;o<i.features.length;o++)e.features.push(i.features[o]);return e}},{"@mapbox/geojson-normalize":22,fs:33,"geojson-stream":36}],20:[function(t,e,r){"use strict";t("./js/LeafletAdvancedLayerSystem/System.js"),t("./js/layers/SynthGridLayer.js");var n=L.map("map",{attributionControl:!1,minZoom:2,maxBounds:L.latLngBounds(L.latLng(90,-180),L.latLng(-90,180)),maxBoundsViscosity:1,preferCanvas:!0}).setView([51.505,-.09],13);n.doubleClickZoom.disable(),L.control.coordinates({position:"bottomleft",decimals:5,labelTemplateLat:"Lat (y): {y}",labelTemplateLng:"Lng (x): {x}",enableUserInput:!1,useLatLngOrder:!0}).addTo(n);var i=new L.ALS.System(n,!0),o=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,noWrap:!0,attribution:'&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'});i.addBaseLayer(o,"Open Street Maps");for(var a=0,s=[["m","Streets"],["s","Satellite"],["p","Terrain"],["s,h","Hybrid"]];a<s.length;a++){var l=s[a],u=L.tileLayer("http://{s}.google.com/vt/lyrs="+l[0]+"&x={x}&y={y}&z={z}",{maxZoom:20,noWrap:!0,subdomains:["mt0","mt1","mt2","mt3"]});i.addBaseLayer(u,"Google "+l[1])}for(var h=0,c=["ru_RU","en_US","uk_UA","tr_TR"];h<c.length;h++){var f=c[h],d=L.tileLayer("http://vec{s}.maps.yandex.net/tiles?l=map&v=4.55.2&z={z}&x={x}&y={y}&scale=2&lang="+f,{subdomains:["01","02","03","04"],attribution:'<a href="yandex.ru" target="_blank">Yandex</a>',reuseTiles:!0,updateWhenIdle:!1,noWrap:!0});i.addBaseLayer(d,"Yandex "+f[3]+f[4])}i.addBaseLayer(L.tileLayer(""),"Empty"),i.addLayerType(L.ALS.SynthGridLayer),i.addLayerType(L.ALS.Layer)},{"./js/LeafletAdvancedLayerSystem/System.js":2,"./js/layers/SynthGridLayer.js":18}],33:[function(t,e,r){},{}],22:[function(t,e,r){"use strict";e.exports=function(t){if(!t||!t.type)return null;var e=n[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],36:[function(t,e,r){"use strict";var n=t("JSONStream");e.exports.parse=function(){return n.parse("features.*")},e.exports.stringify=function(){return n.stringify('{"type":"FeatureCollection","features":[',"\n,\n","]}")}},{JSONStream:30}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});t("@turf/helpers");function n(t,e,r){if(null!==t)for(var i,o,a,s,l,u,h,c,f=0,d=0,p=t.type,g="FeatureCollection"===p,m="Feature"===p,v=g?t.features.length:1,y=0;y<v;y++){l=(c=!!(h=g?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var b=0;b<l;b++){var _=0,w=0;if(null!==(s=c?h.geometries[b]:h)){u=s.coordinates;var S=s.type;switch(f=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(u,d,y,_,w))return!1;d++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],d,y,_,w))return!1;d++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(o=0;o<u[i].length-f;o++){if(!1===e(u[i][o],d,y,_,w))return!1;d++}"MultiLineString"===S&&_++,"Polygon"===S&&w++}"Polygon"===S&&_++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(w=0,o=0;o<u[i].length;o++){for(a=0;a<u[i][o].length-f;a++){if(!1===e(u[i][o][a],d,y,_,w))return!1;d++}w++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===n(s.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}r.coordEach=n},{"@turf/helpers":24}],24:[function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,r){return void 0===r&&(r={}),n({type:"Point",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=6371008.8,r.factors={centimeters:100*r.earthRadius,centimetres:100*r.earthRadius,degrees:r.earthRadius/111325,feet:3.28084*r.earthRadius,inches:39.37*r.earthRadius,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:1e3*r.earthRadius,millimetres:1e3*r.earthRadius,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius/1.0936},r.earthRadius,r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},r.feature=n,r.point=i,r.lineString=o,r.isObject=function(t){return!!t&&t.constructor===Object}},{}],28:[function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function a(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=6371008.8,r.factors={centimeters:100*r.earthRadius,centimetres:100*r.earthRadius,degrees:r.earthRadius/111325,feet:3.28084*r.earthRadius,inches:39.37*r.earthRadius,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:1e3*r.earthRadius,millimetres:1e3*r.earthRadius,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius/1.0936},r.earthRadius,r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},r.polygon=i,r.multiPolygon=o,r.isNumber=a},{}],77:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,i){"object"===(void 0===r?"undefined":n(r))&&void 0!==e?i(r):"function"==typeof define&&define.amd?define(["exports"],i):i((void 0).martinez={})}(0,(function(t){function e(t,e){return t>e?1:t<e?-1:0}var r=function(t,r){void 0===t&&(t=e),void 0===r&&(r=!1),this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!r},n={size:{configurable:!0}};r.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},r.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},r.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},r.prototype.splay=function(t){for(var e,r,n,i,o;t.parent;)(r=(e=t.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=t:n.right=t,t.parent=n):(t.parent=null,this._root=t),i=t.left,o=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,e.right=r,r.parent=e):(i?(r.right=i,i.parent=r):r.right=null,t.left=r,r.parent=t)),o?(e.left=o,o.parent=e):e.left=null,t.right=e,e.parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,e.left=r,r.parent=e):(o?(r.left=o,o.parent=r):r.left=null,t.right=r,r.parent=t)),i?(e.right=i,i.parent=e):e.right=null,t.left=e,e.parent=t)},r.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},r.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.insert=function(t,e){var r=this._root,n=null,i=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===i(r.key,t))return;r=i(r.key,t)<0?r.right:r.left}else for(;r;)n=r,r=i(r.key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:n},n?i(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r},r.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var n=r(e.key,t);if(n<0)e=e.right;else{if(!(n>0))return e;e=e.left}}return null},r.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},r.prototype.remove=function(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var r=this.minNode(e.right);r.parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},r.prototype.removeNode=function(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},r.prototype.erase=function(t){var e=this.find(t);if(e){this.splay(e);var r=e.left,n=e.right,i=null;r&&(r.parent=null,i=this.maxNode(r),this.splay(i),this._root=i),n&&(r?i.right=n:this._root=n,n.parent=i),this._size--}},r.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},r.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e},r.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e},r.prototype.forEach=function(t){for(var e=this._root,r=[],n=!1,i=0;!n;)e?(r.push(e),e=e.left):r.length>0?(t(e=r.pop(),i++),e=e.right):n=!0;return this},r.prototype.range=function(t,e,r,n){for(var i=[],o=this._compare,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&r.call(n,a))return this;a=a.right}return this},r.prototype.keys=function(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.key),t=t.right):n=!0;return r},r.prototype.values=function(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.data),t=t.right):n=!0;return r},r.prototype.at=function(t){for(var e=this._root,r=[],n=!1,i=0;!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},r.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=t.length;return r&&function t(e,r,n,i,o){if(!(n>=i)){for(var a=e[n+i>>1],s=n-1,l=i+1;;){do{s++}while(o(e[s],a)<0);do{l--}while(o(e[l],a)>0);if(s>=l)break;var u=e[s];e[s]=e[l],e[l]=u,u=r[s],r[s]=r[l],r[l]=u}t(e,r,n,l,o),t(e,r,l+1,i,o)}}(t,e,0,n-1,this._compare),this._root=function t(e,r,n,i,o){var a=o-i;if(a>0){var s=i+Math.floor(a/2),l={key:r[s],data:n[s],parent:e};return l.left=t(l,r,n,i,s),l.right=t(l,r,n,s+1,o),l}return null}(null,t,e,0,n),this._size=n,this},r.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},r.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},r.prototype.isEmpty=function(){return null===this._root},n.size.get=function(){return this._size},r.createTree=function(t,e,n,i,o){return new r(n,o).load(t,e,i)},Object.defineProperties(r.prototype,n);function i(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!o(e,r)||e.isVertical()?e.prevInResult:e)),t.inResult=o(t,r)}function o(t,e){switch(t.type){case 0:switch(e){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}break;case 2:return 0===e||1===e;case 3:return 2===e;case 1:return!1}return!1}var a=function(t,e,r,n,i){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=n,this.type=i||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function s(t,e){return t[0]===e[0]&&t[1]===e[1]}function l(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(e[0]-r[0])*(t[1]-r[1])}function u(t,e){var r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r,n){return t.left!==e.left?t.left?1:-1:0!==l(r,t.otherEvent.point,e.otherEvent.point)?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}(t,e,r)}function h(t,e,r){var n=new a(e,!1,t,t.isSubject),i=new a(e,!0,t.otherEvent,t.isSubject);return s(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),n.contourId=i.contourId=t.contourId,u(i,t.otherEvent)>0&&(t.otherEvent.left=!0,i.left=!1),t.otherEvent.otherEvent=i,t.otherEvent=n,r.push(i),r.push(n),r}function c(t,e){return t[0]*e[1]-t[1]*e[0]}function f(t,e){return t[0]*e[0]+t[1]*e[1]}function d(t,e,r){var n=function(t,e,r,n,i){var o=[e[0]-t[0],e[1]-t[1]],a=[n[0]-r[0],n[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var l=[r[0]-t[0],r[1]-t[1]],u=c(o,a),h=u*u,d=f(o,o);if(h>0){var p=c(l,a)/u;if(p<0||p>1)return null;var g=c(l,o)/u;return g<0||g>1?null:0===p||1===p?[s(t,p,o)]:0===g||1===g?[s(r,g,a)]:[s(t,p,o)]}if((h=(u=c(l,o))*u)>0)return null;var m=f(o,l)/d,v=m+f(o,a)/d,y=Math.min(m,v),b=Math.max(m,v);return y<=1&&b>=0?1===y?[s(t,y>0?y:0,o)]:0===b?[s(t,b<1?b:1,o)]:[s(t,y>0?y:0,o),s(t,b<1?b:1,o)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),i=n?n.length:0;if(0===i)return 0;if(1===i&&(s(t.point,e.point)||s(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===i&&t.isSubject===e.isSubject)return 0;if(1===i)return s(t.point,n[0])||s(t.otherEvent.point,n[0])||h(t,n[0],r),s(e.point,n[0])||s(e.otherEvent.point,n[0])||h(e,n[0],r),1;var o=[],a=!1,l=!1;return s(t.point,e.point)?a=!0:1===u(t,e)?o.push(e,t):o.push(t,e),s(t.otherEvent.point,e.otherEvent.point)?l=!0:1===u(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),a&&l||a?(e.type=1,t.type=e.inOut===t.inOut?2:3,a&&!l&&h(o[1].otherEvent,o[0].point,r),2):l?(h(o[0],o[1].point,r),3):o[0]!==o[3].otherEvent?(h(o[0],o[1].point,r),h(o[1],o[2].point,r),3):(h(o[0],o[1].point,r),h(o[3].otherEvent,o[2].point,r),3)}function p(t,e){if(t===e)return 0;if(0!==l(t.point,t.otherEvent.point,e.point)||0!==l(t.point,t.otherEvent.point,e.otherEvent.point))return s(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===u(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,n=e.point;return r[0]===n[0]&&r[1]===n[1]?(r=t.otherEvent.point,n=e.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:t.contourId>e.contourId?1:-1):1===u(t,e)?1:-1}function g(t,e,r,n){var i=t+1,o=e.length;if(i>o-1)return t-1;for(var a=e[t].point,s=e[i].point;i<o&&s[0]===a[0]&&s[1]===a[1];){if(!r[i])return i;s=e[++i].point}for(i=t-1;r[i]&&i>=n;)i--;return i}a.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])>0:(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])>0},a.prototype.isAbove=function(t){return!this.isBelow(t)},a.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},a.prototype.clone=function(){var t=new a(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.inResult=this.inResult,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t};var m=y,v=y;function y(t,e){if(!(this instanceof y))return new y(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||b,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function b(t,e){return t<e?-1:t>e?1:0}y.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&r(e[a],s)<0&&(o=a,s=e[a]),r(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},m.default=v;var _=Math.max,w=Math.min,S=0;function E(t,e,r,n,i,o){var s,l,h,c,f,d;for(s=0,l=t.length-1;s<l;s++)if(h=t[s],c=t[s+1],f=new a(h,!1,void 0,e),d=new a(c,!1,f,e),f.otherEvent=d,h[0]!==c[0]||h[1]!==c[1]){f.contourId=d.contourId=r,o||(f.isExteriorRing=!1,d.isExteriorRing=!1),u(f,d)>0?d.left=!0:f.left=!0;var p=h[0],g=h[1];i[0]=w(i[0],p),i[1]=w(i[1],g),i[2]=_(i[2],p),i[3]=_(i[3],g),n.push(f),n.push(d)}}var L=[];function k(t,e,n){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var o=function(t,e,r){var n=null;return t.length*e.length==0&&(0===r?n=L:2===r?n=t:1!==r&&3!==r||(n=0===t.length?e:t)),n}(t,e,n);if(o)return o===L?null:o;var a=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],l=function(t,e,r,n,i){var o,a,s,l,h,c,f=new m(null,u);for(s=0,l=t.length;s<l;s++)for(h=0,c=(o=t[s]).length;h<c;h++)(a=0===h)&&S++,E(o[h],!0,S,f,r,a);for(s=0,l=e.length;s<l;s++)for(h=0,c=(o=e[s]).length;h<c;h++)a=0===h,2===i&&(a=!1),a&&S++,E(o[h],!1,S,f,n,a);return f}(t,e,a,s,n);return(o=function(t,e,r,n,i){var o=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(0===i?o=L:2===i?o=t:1!==i&&3!==i||(o=t.concat(e))),o}(t,e,a,s,n))?o===L?null:o:function(t,e){var r,n,i,o=function(t){var e,r,n,i,o=[];for(r=0,n=t.length;r<n;r++)((e=t[r]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var a=!1;!a;)for(a=!0,r=0,n=o.length;r<n;r++)r+1<n&&1===u(o[r],o[r+1])&&(i=o[r],o[r]=o[r+1],o[r+1]=i,a=!1);for(r=0,n=o.length;r<n;r++)(e=o[r]).pos=r;for(r=0,n=o.length;r<n;r++)(e=o[r]).left||(i=e.pos,e.pos=e.otherEvent.pos,e.otherEvent.pos=i);return o}(t),a={},s=[];for(r=0,n=o.length;r<n;r++)if(!a[r]){var l=[[]];o[r].isExteriorRing?2===e&&!o[r].isSubject&&s.length>1?s[s.length-1].push(l[0]):s.push(l):2!==e||o[r].isSubject||0!==s.length?0===s.length?s.push([[l]]):s[s.length-1].push(l[0]):s.push(l);var h=s.length-1,c=r,f=o[r].point;for(l[0].push(f);c>=r;)i=o[c],a[c]=!0,i.left?(i.resultInOut=!1,i.contourId=h):(i.otherEvent.resultInOut=!0,i.otherEvent.contourId=h),a[c=i.pos]=!0,l[0].push(o[c].point),c=g(c,o,a,r);i=o[c=-1===c?r:c],a[c]=a[i.pos]=!0,i.otherEvent.resultInOut=!0,i.otherEvent.contourId=h}return s}(function(t,e,n,o,a,s){for(var l,u,h,c=new r(p),f=[],g=Math.min(o[2],a[2]);0!==t.length;){var m=t.pop();if(f.push(m),0===s&&m.point[0]>g||2===s&&m.point[0]>o[2])break;if(m.left){u=l=c.insert(m),l=l!==(h=c.minNode())?c.prev(l):null,u=c.next(u);var v=l?l.key:null;if(i(m,v,s),u&&2===d(m,u.key,t)&&(i(m,v,s),i(m,u.key,s)),l&&2===d(l.key,m,t)){var y=l;i(v,(y=y!==h?c.prev(y):null)?y.key:null,s),i(m,v,s)}}else m=m.otherEvent,u=l=c.find(m),l&&u&&(l=l!==h?c.prev(l):null,u=c.next(u),c.remove(m),u&&l&&d(l.key,u.key,t))}return f}(l,0,0,a,s,n),n)}var x={UNION:1,DIFFERENCE:2,INTERSECTION:0,XOR:3};t.union=function(t,e){return k(t,e,1)},t.diff=function(t,e){return k(t,e,2)},t.xor=function(t,e){return k(t,e,3)},t.intersection=function(t,e){return k(t,e,0)},t.operations=x,Object.defineProperty(t,"__esModule",{value:!0})}))},{}],29:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});t("@turf/helpers");r.getGeom=function(t){return"Feature"===t.type?t.geometry:t}},{"@turf/helpers":28}],30:[function(t,e,r){(function(e){(function(){"use strict";t("jsonparse"),t("through"),e.from&&(e.from,Uint8Array.from)}).call(this)}).call(this,t("buffer").Buffer)},{buffer:34,jsonparse:40,through:117}],34:[function(t,e,r){(function(e){(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=t("base64-js"),i=t("ieee754");r.Buffer=a,r.SlowBuffer=function(t){return+t!=t&&(t=0),a.alloc(+t)},r.INSPECT_MAX_BYTES=50;function o(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=a.prototype,e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return s(t,e,r)}function s(t,r,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),n=o(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,r);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+e(t));if(j(t,ArrayBuffer)||t&&j(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=a.prototype,n}(t,r,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return a.from(i,r,n);var s=function(t){if(a.isBuffer(t)){var e=0|c(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||W(t.length)?o(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+e(t))}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return l(t),o(t<0?0:0|c(t))}function h(t){for(var e=t.length<0?0:0|c(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function c(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function f(t,r){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||j(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+e(t));var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(t).length;default:if(o)return i?-1:M(t).length;r=(""+r).toLowerCase(),o=!0}}function d(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return L(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var h=-1;for(o=r;o<s;o++)if(u(t,o)===u(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===l)return h*a}else-1!==h&&(o-=o-h),h=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var c=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){c=!1;break}if(c)return o}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(W(s))return a;t[r+a]=s}return a}function y(t,e,r,n){return z(M(e,t.length-r),t,r,n)}function b(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return b(t,e,r,n)}function w(t,e,r,n){return z(N(e),t,r,n)}function S(t,e,r,n){return z(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function L(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,l,u=t[i],h=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c<=r)switch(c){case 1:u<128&&(h=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(h=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}r.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(t,e,r){return s(t,e,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},a.allocUnsafe=function(t){return u(t)},a.allocUnsafeSlow=function(t){return u(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(j(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},a.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?L(this,0,t):d.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},a.prototype.compare=function(t,r,n,i,o){if(j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+e(t));if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(i>>>=0),l=(n>>>=0)-(r>>>=0),u=Math.min(s,l),h=this.slice(i,o),c=t.slice(r,n),f=0;f<u;++f)if(h[f]!==c[f]){s=h[f],l=c[f];break}return s<l?-1:l<s?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return y(this,t,e,r);case"ascii":return b(this,t,e,r);case"latin1":case"binary":return _(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=P(t[o]);return i}function C(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function T(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(t,e,r,n,o){return e=+e,r>>>=0,o||I(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,o){return e=+e,r>>>=0,o||I(t,0,r,8),i.write(t,e,r,n,52,8),r+8}a.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;o>=0;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=a.isBuffer(t)?t:a.from(t,n),l=s.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%l]}return this};var B=/[^+/0-9A-Za-z-_]/g;function P(t){return t<16?"0"+t.toString(16):t.toString(16)}function M(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function N(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function j(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function W(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":31,buffer:34,ieee754:37}],40:[function(t,e,r){(function(t){(function(){"use strict";var r={},n=r.LEFT_BRACE=1,i=r.RIGHT_BRACE=2,o=r.LEFT_BRACKET=3,a=r.RIGHT_BRACKET=4,s=r.COLON=5,l=r.COMMA=6,u=r.TRUE=7,h=r.FALSE=8,c=r.NULL=9,f=r.STRING=10,d=r.NUMBER=11,p=r.START=17,g=r.STOP=18,m=r.TRUE1=33,v=r.TRUE2=34,y=r.TRUE3=35,b=r.FALSE1=49,_=r.FALSE2=50,w=r.FALSE3=51,S=r.FALSE4=52,E=r.NULL1=65,L=r.NULL2=66,k=r.NULL3=67,x=r.NUMBER1=81,A=r.NUMBER3=83,C=r.STRING1=97,T=r.STRING2=98,O=r.STRING3=99,I=r.STRING4=100,R=r.STRING5=101,D=r.STRING6=102,B=r.VALUE=113,P=r.KEY=114,M=r.OBJECT=129,N=r.ARRAY=130,z="\\".charCodeAt(0),j="/".charCodeAt(0),W="\b".charCodeAt(0),F="\f".charCodeAt(0),U="\n".charCodeAt(0),V="\r".charCodeAt(0),G="\t".charCodeAt(0);function H(){this.tState=p,this.value=void 0,this.string=void 0,this.stringBuffer=t.alloc?t.alloc(65536):new t(65536),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=B,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new t(2),3:new t(3),4:new t(4)},this.offset=-1}H.toknam=function(t){for(var e=Object.keys(r),n=0,i=e.length;n<i;n++){var o=e[n];if(r[o]===t)return o}return t&&"0x"+t.toString(16)};var q=H.prototype;q.onError=function(t){throw t},q.charError=function(t,e){this.tState=g,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+H.toknam(this.tState)))},q.appendStringChar=function(t){this.stringBufferOffset>=65536&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t},q.appendStringBuf=function(t,e,r){var n=t.length;"number"==typeof e&&(n="number"==typeof r?r<0?t.length-e+r:r-e:t.length-e),n<0&&(n=0),this.stringBufferOffset+n>65536&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,r),this.stringBufferOffset+=n},q.write=function(e){var r;"string"==typeof e&&(e=new t(e));for(var g=0,B=e.length;g<B;g++)if(this.tState===p){if(r=e[g],this.offset++,123===r)this.onToken(n,"{");else if(125===r)this.onToken(i,"}");else if(91===r)this.onToken(o,"[");else if(93===r)this.onToken(a,"]");else if(58===r)this.onToken(s,":");else if(44===r)this.onToken(l,",");else if(116===r)this.tState=m;else if(102===r)this.tState=b;else if(110===r)this.tState=E;else if(34===r)this.string="",this.stringBufferOffset=0,this.tState=C;else if(45===r)this.string="-",this.tState=x;else if(r>=48&&r<64)this.string=String.fromCharCode(r),this.tState=A;else if(32!==r&&9!==r&&10!==r&&13!==r)return this.charError(e,g)}else if(this.tState===C)if(r=e[g],this.bytes_remaining>0){for(var P=0;P<this.bytes_remaining;P++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+P]=e[P];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,g=g+P-1}else if(0===this.bytes_remaining&&r>=128){if(r<=193||r>244)return this.onError(new Error("Invalid UTF-8 character at position "+g+" in state "+H.toknam(this.tState)));if(r>=194&&r<=223&&(this.bytes_in_sequence=2),r>=224&&r<=239&&(this.bytes_in_sequence=3),r>=240&&r<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+g>e.length){for(var M=0;M<=e.length-1-g;M++)this.temp_buffs[this.bytes_in_sequence][M]=e[g+M];this.bytes_remaining=g+this.bytes_in_sequence-e.length,g=e.length-1}else this.appendStringBuf(e,g,g+this.bytes_in_sequence),g=g+this.bytes_in_sequence-1}else if(34===r)this.tState=p,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(f,this.string),this.offset+=t.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===r)this.tState=T;else{if(!(r>=32))return this.charError(e,g);this.appendStringChar(r)}else if(this.tState===T)if(34===(r=e[g]))this.appendStringChar(r),this.tState=C;else if(92===r)this.appendStringChar(z),this.tState=C;else if(47===r)this.appendStringChar(j),this.tState=C;else if(98===r)this.appendStringChar(W),this.tState=C;else if(102===r)this.appendStringChar(F),this.tState=C;else if(110===r)this.appendStringChar(U),this.tState=C;else if(114===r)this.appendStringChar(V),this.tState=C;else if(116===r)this.appendStringChar(G),this.tState=C;else{if(117!==r)return this.charError(e,g);this.unicode="",this.tState=O}else if(this.tState===O||this.tState===I||this.tState===R||this.tState===D){if(!((r=e[g])>=48&&r<64||r>64&&r<=70||r>96&&r<=102))return this.charError(e,g);if(this.unicode+=String.fromCharCode(r),this.tState++===D){var N=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&N>=56320&&N<57344?(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate,N))),this.highSurrogate=void 0):void 0===this.highSurrogate&&N>=55296&&N<56320?this.highSurrogate=N:(void 0!==this.highSurrogate&&(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new t(String.fromCharCode(N)))),this.tState=C}}else if(this.tState===x||this.tState===A)switch(r=e[g]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(r),this.tState=A;break;default:this.tState=p;var q=Number(this.string);if(isNaN(q))return this.charError(e,g);this.string.match(/[0-9]+/)==this.string&&q.toString()!=this.string?this.onToken(f,this.string):this.onToken(d,q),this.offset+=this.string.length-1,this.string=void 0,g--}else if(this.tState===m){if(114!==e[g])return this.charError(e,g);this.tState=v}else if(this.tState===v){if(117!==e[g])return this.charError(e,g);this.tState=y}else if(this.tState===y){if(101!==e[g])return this.charError(e,g);this.tState=p,this.onToken(u,!0),this.offset+=3}else if(this.tState===b){if(97!==e[g])return this.charError(e,g);this.tState=_}else if(this.tState===_){if(108!==e[g])return this.charError(e,g);this.tState=w}else if(this.tState===w){if(115!==e[g])return this.charError(e,g);this.tState=S}else if(this.tState===S){if(101!==e[g])return this.charError(e,g);this.tState=p,this.onToken(h,!1),this.offset+=4}else if(this.tState===E){if(117!==e[g])return this.charError(e,g);this.tState=L}else if(this.tState===L){if(108!==e[g])return this.charError(e,g);this.tState=k}else if(this.tState===k){if(108!==e[g])return this.charError(e,g);this.tState=p,this.onToken(c,null),this.offset+=3}},q.onToken=function(t,e){},q.parseError=function(t,e){this.tState=g,this.onError(new Error("Unexpected "+H.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+H.toknam(this.state)))},q.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},q.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=B)},q.emit=function(t){this.mode&&(this.state=l),this.onValue(t)},q.onValue=function(t){},q.onToken=function(t,e){if(this.state===B)if(t===f||t===d||t===u||t===h||t===c)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===n)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=P,this.mode=M;else if(t===o)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=N,this.state=B;else if(t===i){if(this.mode!==M)return this.parseError(t,e);this.pop()}else{if(t!==a)return this.parseError(t,e);if(this.mode!==N)return this.parseError(t,e);this.pop()}else if(this.state===P)if(t===f)this.key=e,this.state=s;else{if(t!==i)return this.parseError(t,e);this.pop()}else if(this.state===s){if(t!==s)return this.parseError(t,e);this.state=B}else{if(this.state!==l)return this.parseError(t,e);if(t===l)this.mode===N?(this.key++,this.state=B):this.mode===M&&(this.state=P);else{if(!(t===a&&this.mode===N||t===i&&this.mode===M))return this.parseError(t,e);this.pop()}}},H.C=r,e.exports=H}).call(this)}).call(this,t("buffer").Buffer)},{buffer:34}],117:[function(t,e,r){(function(r){(function(){"use strict";var n=t("stream");function i(t,e,i){t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var o=!1,a=!1,s=[],l=!1,u=new n;function h(){for(;s.length&&!u.paused;){var t=s.shift();if(null===t)return u.emit("end");u.emit("data",t)}}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(i&&!1===i.autoDestroy),u.write=function(e){return t.call(this,e),!u.paused},u.queue=u.push=function(t){return l||(null===t&&(l=!0),s.push(t),h()),u},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&r.nextTick((function(){u.destroy()}))})),u.end=function(t){if(!o)return o=!0,arguments.length&&u.write(t),u.writable=!1,e.call(u),!u.readable&&u.autoDestroy&&u.destroy(),u},u.destroy=function(){if(!a)return a=!0,o=!0,s.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),h(),u.paused||u.emit("drain"),u},u}e.exports=i,i.through=i}).call(this)}).call(this,t("_process"))},{_process:94,stream:101}],31:[function(t,e,r){"use strict";r.toByteArray=function(t){var e,r,n=u(t),a=n[0],s=n[1],l=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),h=0,c=s>0?a-4:a;for(r=0;r<c;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[h++]=255&e),1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function c(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(h(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],32:[function(t,e,r){},{}],37:[function(t,e,r){"use strict";r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,h=-7,c=r?i-1:0,f=r?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-h)-1,d>>=-h,h+=s;h>0;o=256*o+t[e+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+t[e+c],c+=f,h-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,l,u=8*o-i-1,h=(1<<u)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(a++,l/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(e*l-1)*Math.pow(2,i),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[r+d]=255&a,d+=p,a/=256,u-=8);t[r+d-p]|=128*g}},{}],35:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,o="object"===("undefined"==typeof Reflect?"undefined":n(Reflect))?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(t,e){return new Promise((function(r,n){function i(){void 0!==o&&t.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==e&&(o=function(r){t.removeListener(e,i),n(r)},t.once("error",o)),t.once(e,i)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+n(t))}function c(t){return void 0===t._maxListeners?l.defaultMaxListeners:t._maxListeners}function f(t,e,r,n){var i,o,a;if(h(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,function(t){console&&console.warn&&console.warn(t)}(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function g(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):v(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},l.prototype.getMaxListeners=function(){return c(this)},l.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)a(l,this,e);else{var u=l.length,h=v(l,u);for(r=0;r<u;++r)a(h[r],this,e)}return!0},l.prototype.addListener=function(t,e){return f(this,t,e,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(t,e){return f(this,t,e,!0)},l.prototype.once=function(t,e){return h(e),this.on(t,p(this,t,e)),this},l.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,p(this,t,e)),this},l.prototype.removeListener=function(t,e){var r,n,i,o,a;if(h(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},l.prototype.listeners=function(t){return g(this,t,!0)},l.prototype.rawListeners=function(t){return g(this,t,!1)},l.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},{}],38:[function(t,e,r){(function(t){(function(){"use strict";var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(h),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){h(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(h,0)};else{var l=new t.MessageChannel;l.port1.onmessage=h,r=function(){l.port2.postMessage(0)}}var u=[];function h(){var t,e;n=!0;for(var r=u.length;r;){for(e=u,u=[],t=-1;++t<r;)e[t]();r=u.length}n=!1}e.exports=function(t){1!==u.push(t)||n||r()}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(t,e,r){"use strict";"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},{}],41:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,a,s,l,u,h=[],c=0,f=t.length,d=f,p="string"!==n.getTypeOf(t);c<t.length;)d=f-c,p?(e=t[c++],r=c<f?t[c++]:0,i=c<f?t[c++]:0):(e=t.charCodeAt(c++),r=c<f?t.charCodeAt(c++):0,i=c<f?t.charCodeAt(c++):0),a=e>>2,s=(3&e)<<4|r>>4,l=d>1?(15&r)<<2|i>>6:64,u=d>2?63&i:64,h.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(u));return h.join("")},r.decode=function(t){var e,r,n,a,s,l,u=0,h=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var c,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(c=i.uint8array?new Uint8Array(0|f):new Array(0|f);u<t.length;)e=o.indexOf(t.charAt(u++))<<2|(a=o.indexOf(t.charAt(u++)))>>4,r=(15&a)<<4|(s=o.indexOf(t.charAt(u++)))>>2,n=(3&s)<<6|(l=o.indexOf(t.charAt(u++))),c[h++]=e,64!==s&&(c[h++]=r),64!==l&&(c[h++]=n);return c}},{"./support":70,"./utils":72}],72:[function(t,e,r){"use strict";var n=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),a=t("set-immediate-shim"),s=t("./external");function l(t){return t}function u(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(t,e,r){var n=[],i=0,o=t.length;if(o<=r)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=h.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=h.applyCanBeUsed.nodebuffer),i)for(;e>1;)try{return h.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return h.stringifyByChar(t)}function f(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=c;var d={};d.string={string:l,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return d.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,o.allocBuffer(t.length))}},d.array={string:c,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},d.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},d.uint8array={string:c,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return o.newBufferFrom(t)}},d.nodebuffer={string:c,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return d.nodebuffer.uint8array(t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:l},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return d[n][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&o.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){a((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,o,a,l){return s.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var h=r.getTypeOf(e);return h?("arraybuffer"===h?e=r.transformTo("uint8array",e):"string"===h&&(l?e=i.decode(e):o&&!0!==a&&(e=function(t){return u(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":41,"./external":46,"./nodejsUtils":52,"./support":70,"set-immediate-shim":99}],70:[function(t,e,r){(function(e){(function(){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:34,"readable-stream":56}],42:[function(t,e,r){"use strict";var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/DataLengthProbe"),a=t("./stream/Crc32Probe");function s(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}o=t("./stream/DataLengthProbe"),s.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new o("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":46,"./stream/Crc32Probe":65,"./stream/DataLengthProbe":66,"./stream/DataWorker":67}],46:[function(t,e,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:76}],65:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":44,"../utils":72,"./GenericWorker":68}],67:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":72,"./GenericWorker":68}],66:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":72,"./GenericWorker":68}],43:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":47,"./stream/GenericWorker":68}],68:[function(t,e,r){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],47:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=n?"uint8array":"array";function l(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new l("Deflate",t)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":68,"./utils":72,pako:78}],44:[function(t,e,r){"use strict";var n=t("./utils");var i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,r,n){var o=i,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}(0|e,t,t.length,0):function(t,e,r,n){var o=i,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":72}],45:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],76:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=t("immediate");function o(){}var a={},s=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==o&&p(this,t)}function c(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){i((function(){var n;try{n=e(r)}catch(e){return a.reject(t,e)}n===t?a.reject(t,new TypeError("Cannot resolve promise with itself")):a.resolve(t,n)}))}function d(t){var e=t&&t.then;if(t&&("object"===n(t)||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function n(e){r||(r=!0,a.reject(t,e))}function i(e){r||(r=!0,a.resolve(t,e))}var o=g((function(){e(i,n)}));"error"===o.status&&n(o.value)}function g(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=h,h.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){if("function"!=typeof t&&this.state===l||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(o);return this.state!==u?f(r,this.state===l?t:e,this.outcome):this.queue.push(new c(r,t,e)),r},c.prototype.callFulfilled=function(t){a.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){a.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},a.resolve=function(t,e){var r=g(d,e);if("error"===r.status)return a.reject(t,r.value);var n=r.value;if(n)p(t,n);else{t.state=l,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},a.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},h.resolve=function(t){return t instanceof this?t:a.resolve(new this(o),t)},h.reject=function(t){var e=new this(o);return a.reject(e,t)},h.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),s=0,l=-1,u=new this(o);++l<r;)h(t[l],l);return u;function h(t,o){e.resolve(t).then((function(t){i[o]=t,++s!==r||n||(n=!0,a.resolve(u,i))}),(function(t){n||(n=!0,a.reject(u,t))}))}},h.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,r=!1;if(!e)return this.resolve([]);for(var n,i=-1,s=new this(o);++i<e;)n=t[i],this.resolve(n).then((function(t){r||(r=!0,a.resolve(s,t))}),(function(t){r||(r=!0,a.reject(s,t))}));return s}},{immediate:38}],78:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":79,"./lib/inflate":80,"./lib/utils/common":81,"./lib/zlib/constants":84}],48:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker"),o=t("../utf8"),a=t("../crc32"),s=t("../signature"),l=function(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},u=function(t,e,r,i,u,h){var c,f,d=t.file,p=t.compression,g=h!==o.utf8encode,m=n.transformTo("string",h(d.name)),v=n.transformTo("string",o.utf8encode(d.name)),y=d.comment,b=n.transformTo("string",h(y)),_=n.transformTo("string",o.utf8encode(y)),w=v.length!==d.name.length,S=_.length!==y.length,E="",L="",k="",x=d.dir,A=d.date,C={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(C.crc32=t.crc32,C.compressedSize=t.compressedSize,C.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),g||!w&&!S||(T|=2048);var O=0,I=0;x&&(O|=16),"UNIX"===u?(I=798,O|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(d.unixPermissions,x)):(I=20,O|=function(t,e){return 63&(t||0)}(d.dosPermissions)),c=A.getUTCHours(),c<<=6,c|=A.getUTCMinutes(),c<<=5,c|=A.getUTCSeconds()/2,f=A.getUTCFullYear()-1980,f<<=4,f|=A.getUTCMonth()+1,f<<=5,f|=A.getUTCDate(),w&&(L=l(1,1)+l(a(m),4)+v,E+="up"+l(L.length,2)+L),S&&(k=l(1,1)+l(a(b),4)+_,E+="uc"+l(k.length,2)+k);var R="";return R+="\n\0",R+=l(T,2),R+=p.magic,R+=l(c,2),R+=l(f,2),R+=l(C.crc32,4),R+=l(C.compressedSize,4),R+=l(C.uncompressedSize,4),R+=l(m.length,2),R+=l(E.length,2),{fileRecord:s.LOCAL_FILE_HEADER+R+m+E,dirRecord:s.CENTRAL_FILE_HEADER+l(I,2)+R+l(b.length,2)+"\0\0\0\0"+l(O,4)+l(i,4)+m+E+b}},h=function(t){return s.DATA_DESCRIPTOR+l(t.crc32,4)+l(t.compressedSize,4)+l(t.uncompressedSize,4)};function c(t,e,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(c,i),c.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,i.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=u(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=u(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:h(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,o){var a=n.transformTo("string",o(i));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(t,2)+l(t,2)+l(e,4)+l(r,4)+l(a.length,2)+a}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!i.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},c.prototype.lock=function(){i.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":44,"../signature":63,"../stream/GenericWorker":68,"../utf8":71,"../utils":72}],71:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function h(){a.call(this,"utf-8 encode")}r.utf8encode=function(t){return i.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,r,n,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;a<l;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e}(t)},r.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,o,a=t.length,l=new Array(2*a);for(r=0,e=0;e<a;)if((i=t[e++])<128)l[r++]=i;else if((o=s[i])>4)l[r++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<a;)i=i<<6|63&t[e++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(u,a),u.prototype.processChunk=function(t){var e=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}(e),l=e;a!==e.length&&(i.uint8array?(l=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(l=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:r.utf8decode(l),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(h,a),h.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":52,"./stream/GenericWorker":68,"./support":70,"./utils":72}],63:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],49:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var o=new i(e.streamFiles,r,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,r){a++;var i=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,e.compression),s=r.options.compressionOptions||e.compressionOptions||{},l=r.dir,u=r.date;r._compressWorker(i,s).withStreamInfo("file",{name:t,dir:l,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(t){o.error(t)}return o}},{"../compressions":43,"./ZipFileWorker":48}],51:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./external"),o=t("./utf8"),a=(n=t("./utils"),t("./zipEntries")),s=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function u(t){return new i.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new s);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new a(e);return r.load(t),r})).then((function(t){var r=[i.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var o=0;o<n.length;o++)r.push(u(n[o]));return i.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,o=0;o<i.length;o++){var a=i[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":46,"./nodejsUtils":52,"./stream/Crc32Probe":65,"./utf8":71,"./utils":72,"./zipEntries":73}],55:[function(t,e,r){"use strict";var n=t("./utf8"),i=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),s=t("./defaults"),l=t("./compressedObject"),u=t("./zipObject"),h=t("./generate"),c=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),d=function(t,e,r){var n,a=i.getTypeOf(e),h=i.extend(r||{},s);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),"string"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(t=g(t)),h.createFolders&&(n=p(t))&&m.call(this,n,!0);var d="string"===a&&!1===h.binary&&!1===h.base64;r&&void 0!==r.binary||(h.binary=!d),(e instanceof l&&0===e.uncompressedSize||h.dir||!e||0===e.length)&&(h.base64=!1,h.binary=!0,e="",h.compression="STORE",a="string");var v;v=e instanceof l||e instanceof o?e:c.isNode&&c.isStream(e)?new f(t,e):i.prepareContent(t,e,h.binary,h.optimizedBinaryString,h.base64);var y=new u(t,v,h);this.files[t]=y},p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:s.createFolders,t=g(t),this.files[t]||d.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function v(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n))},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){if(1===arguments.length){if(v(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,d.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(v(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=m.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var s=r.comment||this.comment||"";e=h.generateWorker(this,r,s)}catch(t){(e=new o("error")).error(t)}return new a(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=y},{"./compressedObject":42,"./defaults":45,"./generate":49,"./nodejs/NodejsStreamInputAdapter":53,"./nodejsUtils":52,"./stream/GenericWorker":68,"./stream/StreamHelper":69,"./utf8":71,"./utils":72,"./zipObject":75}],52:[function(t,e,r){(function(t){(function(){"use strict";e.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:34}],73:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(n>0)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":62,"./signature":63,"./support":70,"./utf8":71,"./utils":72,"./zipEntry":74}],53:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(o,i),o.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":68,"../utils":72}],54:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":72,"readable-stream":56}],56:[function(t,e,r){"use strict";e.exports=t("stream")},{stream:101}],75:[function(t,e,r){"use strict";var n=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),s=t("./stream/GenericWorker"),l=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};l.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(e=e.pipe(new o.Utf8EncodeWorker)),!a&&i&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new s("error")).error(t)}return new n(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)l.prototype[u[c]]=h;e.exports=l},{"./compressedObject":42,"./stream/DataWorker":67,"./stream/GenericWorker":68,"./stream/StreamHelper":69,"./utf8":71}],69:[function(t,e,r){(function(r){(function(){"use strict";var n=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),l=t("../external"),u=null;if(s.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function h(t,e){return new l.Promise((function(i,o){var s=[],l=t._internalType,u=t._outputType,h=t._mimeType;t.on("data",(function(t,r){s.push(t),e&&e(r)})).on("error",(function(t){s=[],o(t)})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),r);case"base64":return a.encode(e);default:return n.transformTo(t,e)}}(u,function(t,e){var n,i=0,o=null,a=0;for(n=0;n<e.length;n++)a+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(o=new Uint8Array(a),n=0;n<e.length;n++)o.set(e[n],i),i+=e[n].length;return o;case"nodebuffer":return r.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(l,s),h);i(t)}catch(t){o(t)}s=[]})).resume()}))}function c(t,e,r){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=r,n.checkSupport(a),this._worker=t.pipe(new i(a)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}c.prototype={accumulate:function(t){return h(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=c}).call(this)}).call(this,t("buffer").Buffer)},{"../base64":41,"../external":46,"../nodejs/NodejsStreamOutputAdapter":54,"../support":70,"../utils":72,"./ConvertWorker":64,"./GenericWorker":68,buffer:34}],101:[function(t,e,r){"use strict";e.exports=i;var n=t("events").EventEmitter;function i(){n.call(this)}t("inherits")(i,n),i.Readable=t("readable-stream/lib/_stream_readable.js"),i.Writable=t("readable-stream/lib/_stream_writable.js"),i.Duplex=t("readable-stream/lib/_stream_duplex.js"),i.Transform=t("readable-stream/lib/_stream_transform.js"),i.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),i.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),i.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),t.removeListener("close",h)}return r.on("error",u),t.on("error",u),r.on("end",h),r.on("close",h),t.on("close",h),t.emit("pipe",r),t}},{events:35,inherits:39,"readable-stream/lib/_stream_duplex.js":103,"readable-stream/lib/_stream_passthrough.js":104,"readable-stream/lib/_stream_readable.js":105,"readable-stream/lib/_stream_transform.js":106,"readable-stream/lib/_stream_writable.js":107,"readable-stream/lib/internal/streams/end-of-stream.js":111,"readable-stream/lib/internal/streams/pipeline.js":113}],57:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":72,"./DataReader":58}],58:[function(t,e,r){"use strict";var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":72}],59:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":72,"./Uint8ArrayReader":61}],61:[function(t,e,r){"use strict";var n=t("./ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":72,"./ArrayReader":57}],60:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":72,"./DataReader":58}],62:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new l(n.transformTo("uint8array",t)):new o(n.transformTo("array",t)):new a(t)}},{"../support":70,"../utils":72,"./ArrayReader":57,"./NodeBufferReader":59,"./StringReader":60,"./Uint8ArrayReader":61}],64:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../utils");function o(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,n),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":72,"./GenericWorker":68}],99:[function(t,e,r){(function(t){(function(){"use strict";e.exports="function"==typeof t?t:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}}).call(this)}).call(this,t("timers").setImmediate)},{timers:167}],74:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),l=t("./compressions"),u=t("./support");function h(t,e){this.options=t,this.loadOptions=e}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(i)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=h},{"./compressedObject":42,"./compressions":43,"./crc32":44,"./reader/readerFor":62,"./support":70,"./utf8":71,"./utils":72}],81:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!==n(r))throw new TypeError(r+"must be non-object");for(var i in r)o(r,i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},s={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],84:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],80:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),l=t("./zlib/zstream"),u=t("./zlib/gzheader"),h=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(s[r])}function f(t,e){var r=new c(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}c.prototype.push=function(t,e){var r,s,l,u,c,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(d),f.next_out=0,f.avail_out=d),(r=n.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===a.Z_BUF_ERROR&&!0===g&&(r=a.Z_OK,g=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),u=f.next_out-l,c=o.buf2string(f.output,l),f.next_out=u,f.avail_out=d-u,u&&i.arraySet(f.output,f.output,l,u,0),this.onData(c)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=c,r.inflate=f,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},r.ungzip=f},{"./utils/common":81,"./utils/strings":82,"./zlib/constants":84,"./zlib/gzheader":87,"./zlib/inflate":89,"./zlib/messages":91,"./zlib/zstream":93}],79:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var h;if(h="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,h)))throw new Error(a[r]);this._dict_set=!0}}function h(t,e){var r=new u(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}u.prototype.push=function(t,e){var r,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),s.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=u,r.deflate=h,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,h(t,e)}},{"./utils/common":81,"./utils/strings":82,"./zlib/deflate":86,"./zlib/messages":91,"./zlib/zstream":93}],82:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,r.string2buf=function(t){var e,r,i,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},r.buf2binstring=function(t){return l(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,s=e||t.length,u=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)u[n++]=i;else if((o=a[i])>4)u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return l(u,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}},{"./common":81}],91:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],93:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],86:[function(t,e,r){"use strict";var n,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),l=t("./messages");function u(t,e){return t.msg=l[e],e}function h(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function d(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e,r,n){var o=t.avail_in;return o>n&&(o=n),0===o?0:(t.avail_in-=o,i.arraySet(e,t.input,t.next_in,o,r),1===t.state.wrap?t.adler=a(t.adler,e,o,r):2===t.state.wrap&&(t.adler=s(t.adler,e,o,r)),t.next_in+=o,t.total_in+=o,o)}function v(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,h=t.w_mask,c=t.prev,f=t.strstart+258,d=u[o+a-1],p=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=258-(f-o),o=f-258,n>a){if(t.match_start=e,a=n,n>=s)break;d=u[o+a-1],p=u[o+a]}}}while((e=c[e&h])>l&&0!=--i);return a<=t.lookahead?a:t.lookahead}function y(t){var e,r,n,o,a,s=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-262)){i.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=s?n-s:0}while(--r);e=r=s;do{n=t.prev[--e],t.prev[e]=n>=s?n-s:0}while(--r);o+=s}if(0===t.strm.avail_in)break;if(r=m(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=r,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+3-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function b(t,e){for(var r,n;;){if(t.lookahead<262){if(y(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=v(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var r,n,i;;){if(t.lookahead<262){if(y(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=v(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function w(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):u(t,-2)}function L(t){var e=E(t);return 0===e&&function(t){t.window_size=2*t.w_size,c(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function k(t,e,r,n,o,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||a<0||a>4)return u(t,-2);8===n&&(n=9);var l=new S;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=r,L(t)}n=[new w(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(y(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new w(4,4,8,4,b),new w(4,5,16,8,b),new w(4,6,32,32,b),new w(4,4,16,16,_),new w(8,16,32,32,_),new w(8,16,128,128,_),new w(8,32,128,256,_),new w(32,128,258,1024,_),new w(32,258,258,4096,_)],r.deflateInit2=k,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},r.deflate=function(t,e){var r,i,a,l;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,p(i,31),p(i,139),p(i,8),i.gzhead?(p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),p(i,255&i.gzhead.time),p(i,i.gzhead.time>>8&255),p(i,i.gzhead.time>>16&255),p(i,i.gzhead.time>>24&255),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(p(i,255&i.gzhead.extra.length),p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(p(i,0),p(i,0),p(i,0),p(i,0),p(i,0),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,3),i.status=113);else{var m=8+(i.w_bits-8<<4)<<8;m|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(m|=32),m+=31-m%31,i.status=113,g(i,m),0!==i.strstart&&(g(i,t.adler>>>16),g(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending!==i.pending_buf_size));)p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,p(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,p(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(t),i.pending+2<=i.pending_buf_size&&(p(i,255&t.adler),p(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&h(e)<=h(r)&&4!==e)return u(t,-5);if(666===i.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(y(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=258){if(y(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+258;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=258-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(c(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(p(i,255&t.adler),p(i,t.adler>>8&255),p(i,t.adler>>16&255),p(i,t.adler>>24&255),p(i,255&t.total_in),p(i,t.total_in>>8&255),p(i,t.total_in>>16&255),p(i,t.total_in>>24&255)):(g(i,t.adler>>>16),g(i,65535&t.adler)),f(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},r.deflateSetDictionary=function(t,e){var r,n,o,s,l,u,h,f,d=e.length;if(!t||!t.state)return-2;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return-2;for(1===s&&(t.adler=a(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===s&&(c(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,e,d-r.w_size,r.w_size,0),e=f,d=r.w_size),l=t.avail_in,u=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,y(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,y(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=u,t.input=h,t.avail_in=l,r.wrap=s,0}},{"../utils/common":81,"./adler32":83,"./crc32":85,"./messages":91,"./trees":92}],87:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],89:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees");function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,h(t)):-2}function f(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,c(t))):-2}function d(t,e){var r,n;return t?(n=new u,t.state=n,n.window=null,0!==(r=f(t,e))&&(t.state=null),r):-2}var p,g,m=!0;function v(t){if(m){var e;for(p=new n.Buf32(512),g=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,g,0,t.work,{bits:5}),m=!1}t.lencode=p,t.lenbits=9,t.distcode=g,t.distbits=5}function y(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateInit2=d,r.inflate=function(t,e){var r,u,h,c,f,d,p,g,m,b,_,w,S,E,L,k,x,A,C,T,O,I,R,D,B=0,P=new n.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),f=t.next_out,h=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=r.hold,m=r.bits,b=d,_=p,I=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;m<16;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(2&r.wrap&&35615===g){r.check=0,P[0]=255&g,P[1]=g>>>8&255,r.check=o(r.check,P,2,0),g=0,m=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",r.mode=30;break}if(m-=4,O=8+(15&(g>>>=4)),0===r.wbits)r.wbits=O;else if(O>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<O,t.adler=r.check=1,r.mode=512&g?10:12,g=0,m=0;break;case 2:for(;m<16;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(r.flags=g,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(P[0]=255&g,P[1]=g>>>8&255,r.check=o(r.check,P,2,0)),g=0,m=0,r.mode=3;case 3:for(;m<32;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}r.head&&(r.head.time=g),512&r.flags&&(P[0]=255&g,P[1]=g>>>8&255,P[2]=g>>>16&255,P[3]=g>>>24&255,r.check=o(r.check,P,4,0)),g=0,m=0,r.mode=4;case 4:for(;m<16;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(P[0]=255&g,P[1]=g>>>8&255,r.check=o(r.check,P,2,0)),g=0,m=0,r.mode=5;case 5:if(1024&r.flags){for(;m<16;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(P[0]=255&g,P[1]=g>>>8&255,r.check=o(r.check,P,2,0)),g=0,m=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>d&&(w=d),w&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,u,c,w,O)),512&r.flags&&(r.check=o(r.check,u,w,c)),d-=w,c+=w,r.length-=w),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===d)break t;w=0;do{O=u[c+w++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O))}while(O&&w<d);if(512&r.flags&&(r.check=o(r.check,u,w,c)),d-=w,c+=w,O)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===d)break t;w=0;do{O=u[c+w++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O))}while(O&&w<d);if(512&r.flags&&(r.check=o(r.check,u,w,c)),d-=w,c+=w,O)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;m<16;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(g!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;m<32;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}t.adler=r.check=l(g),g=0,m=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,r.hold=g,r.bits=m,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){g>>>=7&m,m-=7&m,r.mode=27;break}for(;m<3;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}switch(r.last=1&g,m-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(v(r),r.mode=20,6===e){g>>>=2,m-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}g>>>=2,m-=2;break;case 14:for(g>>>=7&m,m-=7&m;m<32;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,g=0,m=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(w=r.length){if(w>d&&(w=d),w>p&&(w=p),0===w)break t;n.arraySet(h,u,c,w,f),d-=w,c+=w,p-=w,f+=w,r.length-=w;break}r.mode=12;break;case 17:for(;m<14;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(r.nlen=257+(31&g),g>>>=5,m-=5,r.ndist=1+(31&g),g>>>=5,m-=5,r.ncode=4+(15&g),g>>>=4,m-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;m<3;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}r.lens[M[r.have++]]=7&g,g>>>=3,m-=3}for(;r.have<19;)r.lens[M[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},I=s(0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,I){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;k=(B=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,x=65535&B,!((L=B>>>24)<=m);){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(x<16)g>>>=L,m-=L,r.lens[r.have++]=x;else{if(16===x){for(D=L+2;m<D;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(g>>>=L,m-=L,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}O=r.lens[r.have-1],w=3+(3&g),g>>>=2,m-=2}else if(17===x){for(D=L+3;m<D;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}m-=L,O=0,w=3+(7&(g>>>=L)),g>>>=3,m-=3}else{for(D=L+7;m<D;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}m-=L,O=0,w=11+(127&(g>>>=L)),g>>>=7,m-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=O}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,R={bits:r.lenbits},I=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,I){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},I=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,I){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(d>=6&&p>=258){t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,r.hold=g,r.bits=m,a(t,_),f=t.next_out,h=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=r.hold,m=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;k=(B=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,x=65535&B,!((L=B>>>24)<=m);){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(k&&0==(240&k)){for(A=L,C=k,T=x;k=(B=r.lencode[T+((g&(1<<A+C)-1)>>A)])>>>16&255,x=65535&B,!(A+(L=B>>>24)<=m);){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}g>>>=A,m-=A,r.back+=A}if(g>>>=L,m-=L,r.back+=L,r.length=x,0===k){r.mode=26;break}if(32&k){r.back=-1,r.mode=12;break}if(64&k){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&k,r.mode=22;case 22:if(r.extra){for(D=r.extra;m<D;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;k=(B=r.distcode[g&(1<<r.distbits)-1])>>>16&255,x=65535&B,!((L=B>>>24)<=m);){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(0==(240&k)){for(A=L,C=k,T=x;k=(B=r.distcode[T+((g&(1<<A+C)-1)>>A)])>>>16&255,x=65535&B,!(A+(L=B>>>24)<=m);){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}g>>>=A,m-=A,r.back+=A}if(g>>>=L,m-=L,r.back+=L,64&k){t.msg="invalid distance code",r.mode=30;break}r.offset=x,r.extra=15&k,r.mode=24;case 24:if(r.extra){for(D=r.extra;m<D;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break t;if(w=_-p,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,S=r.wsize-w):S=r.wnext-w,w>r.length&&(w=r.length),E=r.window}else E=h,S=f-r.offset,w=r.length;w>p&&(w=p),p-=w,r.length-=w;do{h[f++]=E[S++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===p)break t;h[f++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;m<32;){if(0===d)break t;d--,g|=u[c++]<<m,m+=8}if(_-=p,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?o(r.check,h,_,f-_):i(r.check,h,_,f-_)),_=p,(r.flags?g:l(g))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=0,m=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;m<32;){if(0===d)break t;d--,g+=u[c++]<<m,m+=8}if(g!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=0,m=0}r.mode=29;case 29:I=1;break t;case 30:I=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,r.hold=g,r.bits=m,(r.wsize||_!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&y(t,t.output,t.next_out,_-t.avail_out)?(r.mode=31,-4):(b-=t.avail_in,_-=t.avail_out,t.total_in+=b,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?o(r.check,h,_,t.next_out-_):i(r.check,h,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===b&&0===_||4===e)&&0===I&&(I=-5),I)},r.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,e,n,0)!==r.check?-3:y(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2}},{"../utils/common":81,"./adler32":83,"./crc32":85,"./inffast":88,"./inftrees":90}],83:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],85:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},{}],92:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);i(u);var h=new Array(60);i(h);var c=new Array(512);i(c);var f=new Array(256);i(f);var d=new Array(29);i(d);var p,g,m,v=new Array(30);function y(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function _(t){return t<256?c[t]:c[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function S(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function E(t,e,r){S(t,r[2*e],r[2*e+1])}function L(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function k(t,e,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=L(o[s]++,s))}}function x(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function A(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function C(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function T(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&C(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!C(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function O(t,e,r){var n,i,s,l,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===n?E(t,i,e):(E(t,(s=f[i])+256+1,e),0!==(l=o[s])&&S(t,i-=d[s],l),E(t,s=_(--n),r),0!==(l=a[s])&&S(t,n-=v[s],l))}while(u<t.last_lit);E(t,256,e)}function I(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<l;r++)0!==o[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=u,r=t.heap_len>>1;r>=1;r--)T(t,o,r);i=l;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,T(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,l=e.dyn_tree,u=e.max_code,h=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=l[2*l[2*(n=t.heap[r])+1]+1]+1)>p&&(o=p,g++),l[2*n+1]=o,n>u||(t.bl_count[o]++,a=0,n>=d&&(a=f[n-d]),s=l[2*n],t.opt_len+=s*(o+a),c&&(t.static_len+=s*(h[2*n+1]+a)));if(0!==g){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>u||(l[2*i+1]!==o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}(t,e),k(o,u,t.bl_count)}function R(t,e,r){var n,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<l&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function D(t,e,r){var n,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<l&&i===a)){if(s<u)do{E(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(E(t,i,t.bl_tree),s--),E(t,16,t.bl_tree),S(t,s-3,2)):s<=10?(E(t,17,t.bl_tree),S(t,s-3,3)):(E(t,18,t.bl_tree),S(t,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}}i(v);var B=!1;function P(t,e,r,i){S(t,0+(i?1:0),3),function(t,e,r,i){A(t),i&&(w(t,r),w(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){B||(function(){var t,e,r,n,i,l=new Array(16);for(r=0,n=0;n<28;n++)for(d[n]=r,t=0;t<1<<o[n];t++)f[r++]=n;for(f[r-1]=n,i=0,n=0;n<16;n++)for(v[n]=i,t=0;t<1<<a[n];t++)c[i++]=n;for(i>>=7;n<30;n++)for(v[n]=i<<7,t=0;t<1<<a[n]-7;t++)c[256+i++]=n;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(k(u,287,l),t=0;t<30;t++)h[2*t+1]=5,h[2*t]=L(t,5);p=new y(u,o,257,286,15),g=new y(h,a,0,30,15),m=new y(new Array(0),s,0,19,7)}(),B=!0),t.l_desc=new b(t.dyn_ltree,p),t.d_desc=new b(t.dyn_dtree,g),t.bl_desc=new b(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,x(t)},r._tr_stored_block=P,r._tr_flush_block=function(t,e,r,n){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),I(t,t.l_desc),I(t,t.d_desc),a=function(t){var e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),I(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?P(t,e,r,n):4===t.strategy||o===i?(S(t,2+(n?1:0),3),O(t,u,h)):(S(t,4+(n?1:0),3),function(t,e,r,n){var i;for(S(t,e-257,5),S(t,r-1,5),S(t,n-4,4),i=0;i<n;i++)S(t,t.bl_tree[2*l[i]+1],3);D(t,t.dyn_ltree,e-1),D(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),O(t,t.dyn_ltree,t.dyn_dtree)),x(t),n&&A(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(f[r]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){S(t,2,3),E(t,256,u),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":81}],88:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,a,s,l,u,h,c,f,d,p,g,m,v,y,b,_,w,S,E,L,k,x;r=t.state,n=t.next_in,k=t.input,i=n+(t.avail_in-5),o=t.next_out,x=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=r.dmax,u=r.wsize,h=r.whave,c=r.wnext,f=r.window,d=r.hold,p=r.bits,g=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;t:do{p<15&&(d+=k[n++]<<p,p+=8,d+=k[n++]<<p,p+=8),b=g[d&v];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))x[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=k[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=k[n++]<<p,p+=8,d+=k[n++]<<p,p+=8),b=m[d&y];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=m[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&b,p<(_&=15)&&(d+=k[n++]<<p,(p+=8)<_&&(d+=k[n++]<<p,p+=8)),(S+=d&(1<<_)-1)>l){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,S>(_=o-a)){if((_=S-_)>h&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=0,L=f,0===c){if(E+=u-_,_<w){w-=_;do{x[o++]=f[E++]}while(--_);E=o-S,L=x}}else if(c<_){if(E+=u+c-_,(_-=c)<w){w-=_;do{x[o++]=f[E++]}while(--_);if(E=0,c<w){w-=_=c;do{x[o++]=f[E++]}while(--_);E=o-S,L=x}}}else if(E+=c-_,_<w){w-=_;do{x[o++]=f[E++]}while(--_);E=o-S,L=x}for(;w>2;)x[o++]=L[E++],x[o++]=L[E++],x[o++]=L[E++],w-=3;w&&(x[o++]=L[E++],w>1&&(x[o++]=L[E++]))}else{E=o-S;do{x[o++]=x[E++],x[o++]=x[E++],x[o++]=x[E++],w-=3}while(w>2);w&&(x[o++]=x[E++],w>1&&(x[o++]=x[E++]))}break}}break}}while(n<i&&o<s);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=d,r.bits=p}},{}],90:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,l,u,h,c,f){var d,p,g,m,v,y,b,_,w,S=f.bits,E=0,L=0,k=0,x=0,A=0,C=0,T=0,O=0,I=0,R=0,D=null,B=0,P=new n.Buf16(16),M=new n.Buf16(16),N=null,z=0;for(E=0;E<=15;E++)P[E]=0;for(L=0;L<l;L++)P[e[r+L]]++;for(A=S,x=15;x>=1&&0===P[x];x--);if(A>x&&(A=x),0===x)return u[h++]=20971520,u[h++]=20971520,f.bits=1,0;for(k=1;k<x&&0===P[k];k++);for(A<k&&(A=k),O=1,E=1;E<=15;E++)if(O<<=1,(O-=P[E])<0)return-1;if(O>0&&(0===t||1!==x))return-1;for(M[1]=0,E=1;E<15;E++)M[E+1]=M[E]+P[E];for(L=0;L<l;L++)0!==e[r+L]&&(c[M[e[r+L]]++]=L);if(0===t?(D=N=c,y=19):1===t?(D=i,B-=257,N=o,z-=257,y=256):(D=a,N=s,y=-1),R=0,L=0,E=k,v=h,C=A,T=0,g=-1,m=(I=1<<A)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){b=E-T,c[L]<y?(_=0,w=c[L]):c[L]>y?(_=N[z+c[L]],w=D[B+c[L]]):(_=96,w=0),d=1<<E-T,k=p=1<<C;do{u[v+(R>>T)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<E-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,L++,0==--P[E]){if(E===x)break;E=e[r+c[L]]}if(E>A&&(R&m)!==g){for(0===T&&(T=A),v+=k,O=1<<(C=E-T);C+T<x&&!((O-=P[C+T])<=0);)C++,O<<=1;if(I+=1<<C,1===t&&I>852||2===t&&I>592)return 1;u[g=R&m]=A<<24|C<<16|v-h|0}}return 0!==R&&(u[v+R]=E-T<<24|64<<16|0),f.bits=A,0}},{"../utils/common":81}],94:[function(t,e,r){"use strict";var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,h=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?h=u.concat(h):f=-1,h.length&&p())}function p(){if(!c){var t=l(d);c=!0;for(var e=h.length;e;){for(u=h,h=[];++f<e;)u&&u[f].run();f=-1,e=h.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new g(t,e)),1!==h.length||c||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],97:[function(t,e,r){"use strict";!function(){function t(t,e,r,n){var i="";switch(t){case 0:return i;case 9:return e+n;case 4:return e+r}for(t>=5&&(i=r,t-=5);t-- >0;)i+=e;return i}e.exports=function(e){if(e instanceof Number&&(e=parseInt(e,10)),("string"==typeof e||e instanceof String)&&(e=parseInt(e,10),isNaN(e)))throw new TypeError("toArabic expects a number");if("number"!=typeof e)throw new TypeError("toArabic expects a number");if(isNaN(e))throw new TypeError("toArabic expects a real number");if(e<0)throw new Error("toArabic cannot express negative numbers");if(e>3999)throw new Error("toArabic cannot express numbers over 3999");if(0===e)return"nulla";var r="";return r+=t(Math.floor(e/1e3),"M","",""),e%=1e3,r+=t(Math.floor(e/100),"C","D","M"),e%=100,(r+=t(Math.floor(e/10),"X","L","C"))+t(e%=10,"I","V","X")}}()},{}],96:[function(t,e,r){"use strict";Array.prototype.forEach,e.exports=function(t){if("string"!=typeof t&&!(t instanceof String))throw new TypeError("toArabic expects a string");if(/^nulla$/i.test(t)||!t.length)return 0;if(!(t=t.toUpperCase().match(/^(M{0,3})(CM|DC{0,3}|CD|C{0,3})(XC|LX{0,3}|XL|X{0,3})(IX|VI{0,3}|IV|I{0,3})$/)))throw new Error("toArabic expects a valid roman number");var e=0;return e+=1e3*t[1].length,"CM"===t[2]?e+=900:"CD"===t[2]?e+=400:e+=100*t[2].length+("D"===t[2][0]?400:0),"XC"===t[3]?e+=90:"XL"===t[3]?e+=40:e+=10*t[3].length+("L"===t[3][0]?40:0),"IX"===t[4]?e+=9:"IV"===t[4]?e+=4:e+=1*t[4].length+("V"===t[4][0]?4:0),e}},{}],98:[function(t,e,r){"use strict";var n=t("buffer"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,r),r.Buffer=a),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:34}],167:[function(t,e,r){(function(e,n){(function(){"use strict";var i=t("process/browser.js").nextTick,o=(Function.prototype.apply,Array.prototype.slice),a={},s=0;function l(t,e){this._id=t,this._clearFn=e}l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},r.setImmediate="function"==typeof e?e:function(t){var e=s++,n=!(arguments.length<2)&&o.call(arguments,1);return a[e]=!0,i((function(){a[e]&&(n?t.apply(null,n):t.call(null),r.clearImmediate(e))})),e},r.clearImmediate="function"==typeof n?n:function(t){delete a[t]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":94,timers:167}],111:[function(t,e,r){"use strict";var n=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,l=function(){e.writable||h()},u=e._writableState&&e._writableState.finished,h=function(){s=!1,u=!0,a||o.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,c=!0,s||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return a&&!c?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):s&&!u?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},g=function(){e.req.on("finish",h)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",h),e.on("abort",p),e.req?g():e.on("request",g)):s&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",f),e.on("finish",h),!1!==r.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",h),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",h),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},{"../../../errors":102}],113:[function(t,e,r){"use strict";var n;var i=t("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function l(e,r,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=t("./end-of-stream")),n(e,{readable:r,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var l=!1;return function(t){if(!s&&!l)return l=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function u(t){t()}function h(t,e){return t.pipe(e)}function c(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}e.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=c(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return l(t,o,r>0,(function(t){n||(n=t),t&&a.forEach(u),o||(a.forEach(u),i(n))}))}));return e.reduce(h)}},{"../../../errors":102,"./end-of-stream":111}],103:[function(t,e,r){(function(r){(function(){"use strict";var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=u;var i=t("./_stream_readable"),o=t("./_stream_writable");t("inherits")(u,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var l=a[s];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||r.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":105,"./_stream_writable":107,_process:94,inherits:39}],104:[function(t,e,r){"use strict";e.exports=i;var n=t("./_stream_transform");function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}t("inherits")(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":106,inherits:39}],106:[function(t,e,r){"use strict";e.exports=h;var n=t("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=t("./_stream_duplex");function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);l.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}t("inherits")(h,l),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,r){r(new i("_transform()"))},h.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":102,"./_stream_duplex":103,inherits:39}],107:[function(t,e,r){(function(r,n){(function(){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;e.exports=k,k.WritableState=L;var a={deprecate:t("util-deprecate")},s=t("./internal/streams/stream"),l=t("buffer").Buffer,u=n.Uint8Array||function(){};var h,c=t("./internal/streams/destroy"),f=t("./internal/streams/state").getHighWaterMark,d=t("../errors").codes,p=d.ERR_INVALID_ARG_TYPE,g=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,v=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,_=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,S=c.errorOrDestroy;function E(){}function L(e,n,a){o=o||t("./_stream_duplex"),e=e||{},"boolean"!=typeof a&&(a=n instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?(r.nextTick(o,i),r.nextTick(R,t,e),t._writableState.errorEmitted=!0,S(t,i)):(o(i),t._writableState.errorEmitted=!0,S(t,i),R(t,e))}(t,n,i,e,o);else{var a=O(n)||t.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||T(t,n),i?r.nextTick(C,t,n,a,o):C(t,n,a,o)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function k(e){var r=this instanceof(o=o||t("./_stream_duplex"));if(!r&&!h.call(k,this))return new k(e);this._writableState=new L(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function x(t,e,r,n,i,o){if(!r){var a=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,r)),e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,s,n,i,o);return u}function A(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function C(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),R(t,e)}function T(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)o[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;o.allBuffers=l,A(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,c=r.callback;if(A(t,e,!1,e.objectMode?1:u.length,u,h,c),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function O(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function I(t,e){t._final((function(r){e.pendingcb--,r&&S(t,r),e.prefinished=!0,t.emit("prefinish"),R(t,e)}))}function R(t,e){var n=O(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,r.nextTick(I,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return n}t("inherits")(k,s),L.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(L.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===k&&t&&t._writableState instanceof L}})):h=function(t){return t instanceof this},k.prototype.pipe=function(){S(this,new v)},k.prototype.write=function(t,e,n){var i=this._writableState,o=!1,a=!i.objectMode&&function(t){return l.isBuffer(t)||t instanceof u}(t);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=E),i.ending?function(t,e){var n=new _;S(t,n),r.nextTick(e,n)}(this,n):(a||function(t,e,n,i){var o;return null===n?o=new b:"string"==typeof n||e.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(S(t,o),r.nextTick(i,o),!1)}(this,i,t,n))&&(i.pendingcb++,o=x(this,i,a,t,e,n)),o},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},k.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(t,e,r){r(new g("_write()"))},k.prototype._writev=null,k.prototype.end=function(t,e,n){var i=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,n){e.ending=!0,R(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,i,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":102,"./_stream_duplex":103,"./internal/streams/destroy":110,"./internal/streams/state":114,"./internal/streams/stream":115,_process:94,buffer:34,inherits:39,"util-deprecate":168}],105:[function(t,e,r){(function(r,n){(function(){"use strict";var i;e.exports=k,k.ReadableState=L;t("events").EventEmitter;var o=function(t,e){return t.listeners(e).length},a=t("./internal/streams/stream"),s=t("buffer").Buffer,l=n.Uint8Array||function(){};var u,h=t("util");u=h&&h.debuglog?h.debuglog("stream"):function(){};var c,f,d,p=t("./internal/streams/buffer_list"),g=t("./internal/streams/destroy"),m=t("./internal/streams/state").getHighWaterMark,v=t("../errors").codes,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(k,a);var S=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function L(e,r,n){i=i||t("./_stream_duplex"),e=e||{},"boolean"!=typeof n&&(n=r instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=t("string_decoder/").StringDecoder),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function k(e){if(i=i||t("./_stream_duplex"),!(this instanceof k))return new k(e);var r=this instanceof i;this._readableState=new L(e,this,r),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function x(t,e,r,n,i){u("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(u("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?T(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,O(t)))}}(t,a);else if(i||(o=function(t,e){var r;return function(t){return s.isBuffer(t)||t instanceof l}(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],e)),r}(a,e)),o)S(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),n)a.endEmitted?S(t,new w):A(t,a,e,!0);else if(a.ended)S(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?A(t,a,e,!1):I(t,a)):A(t,a,e,!1)}else n||(a.reading=!1,I(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function A(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&T(t)),I(t,e)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),k.prototype.destroy=g.destroy,k.prototype._undestroy=g.undestroy,k.prototype._destroy=function(t,e){e(t)},k.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=s.from(t,e),e=""),r=!0),x(this,t,e,!1,r)},k.prototype.unshift=function(t){return x(this,t,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){c||(c=t("string_decoder/").StringDecoder);var r=new c(e);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function T(t){var e=t._readableState;u("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(u("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(O,t))}function O(t){var e=t._readableState;u("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,M(t)}function I(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(R,t,e))}function R(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(u("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function D(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function B(t){u("readable nexttick read 0"),t.read(0)}function P(t,e){u("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function N(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function z(t){var e=t._readableState;u("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(j,e,t))}function j(t,e){if(u("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function W(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}k.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?z(this):T(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&z(this),null;var n,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(r,e))),null===(n=t>0?N(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&z(this)),null!==n&&this.emit("data",n),n},k.prototype._read=function(t){S(this,new _("_read()"))},k.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,e);var a=e&&!1===e.end||t===r.stdout||t===r.stderr?g:s;function s(){u("onend"),t.end()}i.endEmitted?r.nextTick(a):n.once("end",a),t.on("unpipe",(function e(r,o){u("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,u("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",e),n.removeListener("end",s),n.removeListener("end",g),n.removeListener("data",c),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,M(t))}}(n);t.on("drain",l);var h=!1;function c(e){u("ondata");var r=t.write(e);u("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==W(i.pipes,t))&&!h&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function f(e){u("onerror",e),g(),t.removeListener("error",f),0===o(t,"error")&&S(t,e)}function d(){t.removeListener("finish",p),g()}function p(){u("onfinish"),t.removeListener("close",d),g()}function g(){u("unpipe"),n.unpipe(t)}return n.on("data",c),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",f),t.once("close",d),t.once("finish",p),t.emit("pipe",n),i.flowing||(u("pipe resume"),n.resume()),t},k.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=W(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},k.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?T(this):i.reading||r.nextTick(B,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&r.nextTick(D,this),n},k.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(D,this),e},k.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(P,t,e))}(this,t)),t.paused=!1,this},k.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=t("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),k._fromList=N,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,r){return void 0===d&&(d=t("./internal/streams/from")),d(k,e,r)})}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":102,"./_stream_duplex":103,"./internal/streams/async_iterator":108,"./internal/streams/buffer_list":109,"./internal/streams/destroy":110,"./internal/streams/from":112,"./internal/streams/state":114,"./internal/streams/stream":115,_process:94,buffer:34,events:35,inherits:39,"string_decoder/":116,util:32}],102:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={};function o(t,e,r){r||(r=Error);var n=function(t){function r(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(r,t),r}(r);n.prototype.name=r.name,n.prototype.code=t,i[t]=n}function a(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}o("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(t,e,r){var i,o;if("string"==typeof e&&function(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))o="The ".concat(t," ").concat(i," ").concat(a(e,"type"));else{var s=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(s," ").concat(i," ").concat(a(e,"type"))}return o+". Received type ".concat(n(r))}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},{}],114:[function(t,e,r){"use strict";var n=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},{"../../../errors":102}],115:[function(t,e,r){"use strict";e.exports=t("events").EventEmitter},{events:35}],110:[function(t,e,r){(function(t){(function(){"use strict";function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}e.exports={destroy:function(e,o){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?t.nextTick(n,a):(a._writableState.errorEmitted=!0,t.nextTick(r,a,e)):t.nextTick(r,a,e):o?(t.nextTick(n,a),o(e)):t.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,t("_process"))},{_process:94}],112:[function(t,e,r){"use strict";e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],109:[function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=t("buffer").Buffer,s=t("util").inspect,l=s&&s.custom||"inspect";function u(t,e,r){a.prototype.copy.call(t,e,r)}e.exports=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r)}(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e=a.allocUnsafe(t>>>0),r=this.head,n=0;r;)u(r.data,e,n),n+=r.data.length,r=r.next;return e}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:l,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}]),t}()},{buffer:34,util:32}],108:[function(t,e,r){(function(r){(function(){"use strict";var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=t("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[a];if(null!==e){var r=t[f].read();null!==r&&(t[h]=null,t[a]=null,t[s]=null,e(d(r,!1)))}}function g(t){r.nextTick(p,t)}var m=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(e,n){r.nextTick((function(){t[l]?n(t[l]):e(d(void 0,!0))}))}));var n,i=this[h];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[u]?r(d(void 0,!0)):e[c](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[c])}return this[h]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(d(void 0,!0))}))}))})),n),m);e.exports=function(t){var e,r=Object.create(v,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,c,{value:function(t,e){var n=r[f].read();n?(r[h]=null,r[a]=null,r[s]=null,t(d(n,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[h]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[h]=null,r[a]=null,r[s]=null,e(t)),void(r[l]=t)}var n=r[a];null!==n&&(r[h]=null,r[a]=null,r[s]=null,n(d(void 0,!0))),r[u]=!0})),t.on("readable",g.bind(null,r)),r}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":111,_process:94}],116:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=h,this.end=c,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function h(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}r.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":98}],168:[function(t,e,r){(function(t){(function(){"use strict";function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],118:[function(t,e,r){"use strict";e.exports=function(){var t=document.createElement("div");return t.setAttribute("aria-live","assertive"),t.setAttribute("style","position: absolute; opacity: 0; height: 0; width: 0; overflow: hidden; pointer-events: none;"),t.classList.add("time-input-polyfill-accessibility-block"),document.querySelector("body").appendChild(t),t}},{}],119:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("../getters/get_values");e.exports=function(t,e){setTimeout((function(){var r=n(t),o=i(t)[r],a="--"==o?"blank":o,s={hrs:"Hours",min:"Minutes",mode:"AM/PM"}[r],l={initial:"$label grouping $fullValue.",select:"$segmentName spin button $segmentValue.",update:"$segmentValue."},u=e.map((function(t){return l[t]?l[t]:t})),h=t.value.replace(/--/g,"blank"),c="<p>"+u.join("</p><p>")+"</p>";c=(c=(c=(c=c.replace(/\$label/g,t.polyfill.label)).replace(/\$segmentName/g,s)).replace(/\$segmentValue/g,a)).replace(/\$fullValue/g,h),t.polyfill.$a11y.innerHTML=c}),1)}},{"../getters/get_current_segment":131,"../getters/get_values":134}],131:[function(t,e,r){"use strict";var n=t("../static-values/ranges"),i=t("./get_selected_range");e.exports=function(t){var e=i(t);for(var r in n){var o=n[r],a=o.start<=e.start,s=o.end>=e.end;if(a&&s)return r}return"hrs"}},{"../static-values/ranges":162,"./get_selected_range":133}],134:[function(t,e,r){"use strict";var n=t("../converters/convert_number");e.exports=function(t,e){var r=e||t.value,i=/([0-9-]{1,2})\:([0-9-]{1,2})\s?(AM|PM|\-\-)?/.exec(r);return{hrs:n(i[1]),min:n(i[2]),mode:i[3]}}},{"../converters/convert_number":121}],120:[function(t,e,r){"use strict";e.exports=function(t){return t<=12?0===t?12:t:t-12}},{}],121:[function(t,e,r){"use strict";e.exports=function(t){return isNaN(t)?t:parseInt(t)}},{}],122:[function(t,e,r){"use strict";var n=t("./convert_number"),i=t("./convert_hours_to_12hr_time"),o=t("./leading_zero");e.exports=function(t){if(""===t)return"--:-- --";var e=/([0-9]{2})\:([0-9]{2})/.exec(t),r=n(e[1]),a=e[2],s=i(r),l=r>=12?"PM":"AM";return[o(s),":",a," ",l].join("")}},{"./convert_hours_to_12hr_time":120,"./convert_number":121,"./leading_zero":124}],124:[function(t,e,r){"use strict";e.exports=function(t){if(isNaN(t))return t;var e=parseInt(t);return e<10?"0"+e:t}},{}],123:[function(t,e,r){"use strict";var n=t("./leading_zero");e.exports=function(t){if(/-/.test(t))return"";var e,r=t.indexOf("PM")>-1,i=/^([0-9]{2})/.exec(t),o=i?parseInt(i[1]):"",a=24===(e=12===o?r?12:0:r?o+12:o)?0:e;return t.replace(/^[0-9]{2}:([0-9]{2}) (AM|PM)/,n(a)+":$1")}},{"./leading_zero":124}],125:[function(t,e,r){"use strict";var n=t("../helpers/values"),i=t("../selectors/select_segment"),o=t("../selectors/next_segment"),a=t("../selectors/prev_segment"),s=t("../selectors/select_cursor_segment"),l=t("../getters/get_current_segment"),u=t("../setters/reset"),h=t("../setters/manual_number_entry"),c=t("../setters/clear_segment"),f=t("../setters/increment_current_segment"),d=t("../setters/decrement_current_segment"),p=t("../setters/set_mode"),g=t("../setters/switch_times"),m=t("../events/handle_tab"),v=t("../static-values/all_number_keys"),y=t("../static-values/named_keys"),b=t("../accessibility/update_a11y");e.exports=function(t){var e="",r=!1;document.addEventListener("keydown",(function(t){r=t.shiftKey})),document.addEventListener("keyup",(function(t){r=t.shiftKey})),t.form&&t.form.addEventListener("submit",(function(){!function(t){t.polyfill.autoSwap&&(g(t,24),setTimeout((function(){g(t,12)}),1))}(t)}));var _=!1;t.addEventListener("mousedown",(function(){_=!0})),t.addEventListener("mouseup",(function(){setTimeout((function(){""===t.value&&u(t)}),1)})),t.addEventListener("click",(function(e){s(t)})),t.addEventListener("blur",(function(){var r=t.dataset.value;r!==e&&(e=r),_=!1})),t.addEventListener("focus",(function(e){_||(e.preventDefault(),i(t,r?"mode":"hrs")),b(t,["initial","select"])})),t.addEventListener("keydown",(function(e){if(13===e.which)return!0;var r=v.indexOf(e.which)>-1,i=n(y).indexOf(e.which)>-1,s=[y.ArrowDown,y.ArrowRight,y.ArrowUp,y.ArrowLeft].indexOf(e.which)>-1,g=[y.a,y.p].indexOf(e.which)>-1,b=[y.Delete,y.Backspace].indexOf(e.which)>-1;if((!i||s||r||g||b)&&e.preventDefault(),r&&h(t,e.which),b){var _=l(t);c(t,_)}switch(e.which){case y.ArrowRight:o(t);break;case y.ArrowLeft:a(t);break;case y.ArrowUp:f(t);break;case y.ArrowDown:d(t);break;case y.Escape:u(t);break;case y.a:p(t,"AM");break;case y.p:p(t,"PM");break;case y.Tab:m(t,e)}}))}},{"../accessibility/update_a11y":119,"../events/handle_tab":127,"../getters/get_current_segment":131,"../helpers/values":137,"../selectors/next_segment":138,"../selectors/prev_segment":139,"../selectors/select_cursor_segment":140,"../selectors/select_segment":141,"../setters/clear_segment":144,"../setters/decrement_current_segment":146,"../setters/increment_current_segment":148,"../setters/manual_number_entry":149,"../setters/reset":151,"../setters/set_mode":153,"../setters/switch_times":157,"../static-values/all_number_keys":160,"../static-values/named_keys":161}],157:[function(t,e,r){"use strict";var n=t("./switch_to_data_value"),i=t("./set_time");e.exports=function(t,e){var r=/\s/.test(t.value);12!=e&&24!=e&&(e=r?24:12),{12:function(){r||i(t,t.dataset.value)},24:function(){r&&n(t)}}[e]()}},{"./set_time":155,"./switch_to_data_value":158}],137:[function(t,e,r){"use strict";e.exports=function(t){var e=[];for(var r in t)e.push(t[r]);return e}},{}],141:[function(t,e,r){"use strict";e.exports=function(t,e){var r;function n(e,r){return function(){t.setSelectionRange(e,r)}}r="mode"===e?"text":"tel",t.setAttribute("type",r),{hrs:n(0,2),min:n(3,5),mode:n(6,8)}[e](t)}},{}],161:[function(t,e,r){"use strict";e.exports={ArrowDown:40,ArrowRight:39,ArrowUp:38,ArrowLeft:37,Backspace:8,Delete:46,Tab:9,Shift:16,Escape:27,a:65,p:80}},{}],160:[function(t,e,r){"use strict";e.exports=[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105]},{}],138:[function(t,e,r){"use strict";var n=t("./traverse");e.exports=function(t){n(t,"next")}},{"./traverse":142}],140:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("./select_segment");e.exports=function(t){var e=n(t);i(t,e)}},{"../getters/get_current_segment":131,"./select_segment":141}],144:[function(t,e,r){"use strict";var n=t("./set_segment"),i=t("../accessibility/update_a11y");e.exports=function(t,e){n(t,e,"--"),i(t,["update"])}},{"../accessibility/update_a11y":119,"./set_segment":154}],151:[function(t,e,r){"use strict";var n=t("./apply_default"),i=t("../selectors/select_segment");e.exports=function(t){n(t),i(t,"hrs")}},{"../selectors/select_segment":141,"./apply_default":143}],153:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("./set_segment");e.exports=function(t,e){var r=n(t);"mode"===r&&i(t,r,e)}},{"../getters/get_current_segment":131,"./set_segment":154}],127:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("../selectors/prev_segment"),o=t("../selectors/next_segment");e.exports=function(t,e){var r=n(t),a=e.shiftKey&&"hrs"===r,s=!e.shiftKey&&"mode"===r;a||s||(e.preventDefault(),e.shiftKey?i(t):o(t))}},{"../getters/get_current_segment":131,"../selectors/next_segment":138,"../selectors/prev_segment":139}],148:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("../setters/increment");e.exports=function(t){var e=n(t);i(t,e)}},{"../getters/get_current_segment":131,"../setters/increment":147}],149:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("./set_segment"),o=t("../selectors/next_segment"),a=t("../helpers/manual_entry_log"),s=t("../static-values/sorted_number_keys");e.exports=function(t,e){var r=s[e],l=n(t);if("mode"!==l){var u=a.items().length,h={hrs:[1,2],min:[5,9]},c=h[l][u];u<2&&a.add(r);var f=parseInt(h[l].join("")),d=parseInt(a.items().join(""));f>=d&&i(t,l,d),(r>c||2===a.items().length)&&o(t)}}},{"../getters/get_current_segment":131,"../helpers/manual_entry_log":135,"../selectors/next_segment":138,"../static-values/sorted_number_keys":164,"./set_segment":154}],139:[function(t,e,r){"use strict";var n=t("./traverse");e.exports=function(t){n(t,"prev")}},{"./traverse":142}],146:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("../setters/decrement");e.exports=function(t){var e=n(t);i(t,e)}},{"../getters/get_current_segment":131,"../setters/decrement":145}],126:[function(t,e,r){"use strict";e.exports=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}},{}],128:[function(t,e,r){"use strict";var n=t("./trigger_event");e.exports=function(t){n(t,"input"),n(t,"change")}},{"./trigger_event":129}],129:[function(t,e,r){"use strict";var n=t("./create_event"),i=n("input"),o=n("change");e.exports=function(t,e){var r={input:i,change:o}[e];(function(t){return!/--/.test(t.value)})(t)&&t.dispatchEvent(r)}},{"./create_event":126}],130:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=t,n=[];r;){if(n.push(r),r.msMatchesSelector?r.msMatchesSelector(e):r.matches(e))return n;r=r.parentElement}return n}},{}],133:[function(t,e,r){"use strict";e.exports=function(t){return{start:t.selectionStart,end:t.selectionEnd}}},{}],162:[function(t,e,r){"use strict";e.exports={hrs:{start:0,end:2},min:{start:3,end:5},mode:{start:6,end:8}}},{}],132:[function(t,e,r){"use strict";var n=t("./get_ancestors");e.exports=function(t){var e=function(t){var e=t.getAttribute("aria-labelledby");if(e){var r=document.getElementById(e);if(r)return r.textContent}return!1}(t)||function(t){return t.getAttribute("aria-label")||!1}(t)||function(t){if(t.id){var e=document.querySelector('label[for="'+t.id+'"]');if(e)return e.textContent}return!1}(t)||function(t){var e=n(t,"label"),r=e[e.length-1];return"LABEL"==r.nodeName&&r.textContent}(t)||function(t){return t.getAttribute("title")||!1}(t);if(e)return e;throw console.error("Label text for input not found.",t),new Error("Cannot polyfill time input due to a missing label.")}},{"./get_ancestors":130}],135:[function(t,e,r){"use strict";var n=[];e.exports={items:function(){return n},clear:function(){n=[]},add:function(t){n.push(t)}}},{}],136:[function(t,e,r){"use strict";var n,i=((n=document.createElement("input")).setAttribute("type","time"),n.setAttribute("value","not-a-time"),"not-a-time"!==n.value);window&&(window.supportsTime=i),e&&(e.exports=i)},{}],142:[function(t,e,r){"use strict";var n=t("../getters/get_current_segment"),i=t("../selectors/select_segment"),o=t("../helpers/manual_entry_log"),a=t("../static-values/segments"),s=t("../accessibility/update_a11y");e.exports=function(t,e){var r=n(t),l="next"===e?1:-1,u=a.indexOf(r)+l,h={next:a[u]||"mode",prev:u<0?"hrs":a[u]}[e];i(t,h),o.clear(),s(t,["select"])}},{"../accessibility/update_a11y":119,"../getters/get_current_segment":131,"../helpers/manual_entry_log":135,"../selectors/select_segment":141,"../static-values/segments":163}],163:[function(t,e,r){"use strict";var n=t("./ranges"),i=Object.keys(n);e.exports=i},{"./ranges":162}],143:[function(t,e,r){"use strict";var n=t("../setters/set_data_attribute"),i=t("../events/trigger_both_events");e.exports=function(t){t.value="--:-- --",n(t,""),i(t)}},{"../events/trigger_both_events":128,"../setters/set_data_attribute":152}],152:[function(t,e,r){"use strict";var n=t("../converters/convert_to_24hr_time");e.exports=function(t,e){var r=e.indexOf("-")>-1?"":e,i=n(r);t.setAttribute("data-value",i)}},{"../converters/convert_to_24hr_time":123}],154:[function(t,e,r){"use strict";var n=t("../getters/get_values"),i=t("../converters/leading_zero"),o=t("../selectors/select_segment"),a=t("./set_data_attribute"),s=t("../events/trigger_both_events");e.exports=function(t,e,r){var l=n(t);l[e]=r;var u=[i(l.hrs),":",i(l.min)," ",l.mode].join("");t.value=u,o(t,e),a(t,u),s(t)}},{"../converters/leading_zero":124,"../events/trigger_both_events":128,"../getters/get_values":134,"../selectors/select_segment":141,"./set_data_attribute":152}],145:[function(t,e,r){"use strict";var n=t("./switch_mode"),i=t("./nudge_time_segment"),o=t("../accessibility/update_a11y");e.exports=function(t,e){"mode"===e?n(t,"PM"):i(t,e,"down"),o(t,["update"])}},{"../accessibility/update_a11y":119,"./nudge_time_segment":150,"./switch_mode":156}],156:[function(t,e,r){"use strict";var n=t("../getters/get_values"),i=t("./set_segment");e.exports=function(t,e){e=e||"AM";var r=n(t).mode;i(t,"mode",{"--":e,AM:"PM",PM:"AM"}[r])}},{"../getters/get_values":134,"./set_segment":154}],150:[function(t,e,r){"use strict";var n=t("../getters/get_values"),i=t("../converters/convert_hours_to_12hr_time"),o=t("../converters/leading_zero"),a=t("./set_segment");e.exports=function(t,e,r){var s,l=n(t),u="up"===r?1:-1;if("--"===l[e]){var h=new Date;s={hrs:i(h.getHours()),min:h.getMinutes()}}else{var c={up:l.min<59?l.min+u:0,down:0===l.min?59:l.min+u};s={hrs:i(l.hrs+u),min:c[r]}}a(t,e,o(s[e]))}},{"../converters/convert_hours_to_12hr_time":120,"../converters/leading_zero":124,"../getters/get_values":134,"./set_segment":154}],147:[function(t,e,r){"use strict";var n=t("./switch_mode"),i=t("./nudge_time_segment"),o=t("../accessibility/update_a11y");e.exports=function(t,e){"mode"===e?n(t,"AM"):i(t,e,"up"),o(t,["update"])}},{"../accessibility/update_a11y":119,"./nudge_time_segment":150,"./switch_mode":156}],164:[function(t,e,r){"use strict";var n=t("./all_number_keys"),i={};n.forEach((function(t,e){var r=e>9?e-10:e;i[t]=r})),e.exports=i},{"./all_number_keys":160}],155:[function(t,e,r){"use strict";var n=t("../converters/convert_to_12hr_time"),i=t("../setters/set_data_attribute");e.exports=function(t,e){var r=n(e);t.value=r,i(t,e)}},{"../converters/convert_to_12hr_time":122,"../setters/set_data_attribute":152}],158:[function(t,e,r){"use strict";e.exports=function(t){var e=t.dataset.value;t.value=e}},{}],159:[function(t,e,r){"use strict";var n=t("../setters/set_time");e.exports=function(t){return n(t,t.value),t}},{"../setters/set_time":155}]},{},[20]);